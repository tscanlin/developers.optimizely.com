---
partial: _inline.html
title: Redirect - Query parameter
anchor: helpers-add-query-param
js: |

  /*
   *  Usage
   *    This JavaScript will add a query parameter you specify to the visitor's current URL.
   *
   *  @param {String} newQuery - Parameter key-value pair. Replace [PARAM_NAME] and [PARAM_VALUE] with your values.
   */

  /* _optimizely_redirect=http://custom_add_query_param */
  var newQuery = "[PARAM_NAME]=[PARAM_VALUE]";
  var _optly = {redir: document.createElement("a")};
  _optly.redir = {protocol: "https:" == document.location.protocol ? "https://" : "http://",
                  domain: window.location.hostname,
                  pathname: window.location.pathname
                 };
  _optly.cur = window.location.search;
  if (_optly.cur) {
    _optly.redir.query = _optly.cur + "&" + newQuery;
  } else {
    _optly.redir.query = "?" + newQuery;
  }
  _optly.redir.href = _optly.redir.protocol + _optly.redir.domain + _optly.redir.pathname + _optly.redir.query;
  window.location.replace(_optly.redir.href);

---

This JavaScript will redirect a visitor to a new URL after appending a query parameter you specify.

Please exclude the query parameter as an Audience condition to prevent it from getting added multiple times.
