<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Optimizely Developers</title>
    <meta charset="UTF-8">
    <meta name="description" content="Optimizely Developer Documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>

    <!-- This should be the first script to make sure redirects work quickly. -->
    <script src="/assets/js/bundle.js" type="text/javascript"></script>

    <!-- Demandbase -->
    <script>
      (function(d,b,a,s,e) {
        var t = b.createElement(a), fs = b.getElementsByTagName(a)[0];
        t.async=1; t.id=e; t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
        fs.parentNode.insertBefore(t, fs);
      })(window,document,'script','scripts.demandbase.com/q8GATaKQ.min.js','demandbase_js_lib');
    </script>

    <!-- Heap Analytics -->
    <script type="text/javascript">
      if (document.location.hostname != "localhost") {
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("411455962");
      }
    </script>

    <!-- Optimizely -->
    <script src="//cdn.optimizely.com/js/6663270427.js"></script>
  </head>
  <body class="ios reference">
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <!-- <symbol id="add" viewBox="-590 386 16 16">
      <path d="M-575 395v-2h-6v-6h-2v6h-6v2h6v6h2v-6z"/>
    </symbol>
    <symbol id="align-center" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM24 14H8c-1.1 0-2-.9-2-2s.9-2 2-2h16c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM24 30H8c-1.1 0-2-.9-2-2s.9-2 2-2h16c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-justify" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 14H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 30H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-left" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM18 14H4c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM18 30H4c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-right" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 14H14c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 30H14c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="archive" viewBox="0 0 32 32">
      <g><path d="M30 4c0-1.3-.6-2-2-2H4c-1.3 0-2 .6-2 2v4h28V4zM4 10v18c0 1.3.6 2 2 2h20c1.3 0 2.1-.6 2.1-2V10H4z"/><path fill="#fff" d="M18 18v-8h-4v8H8l8 8 8-8z"/></g>
    </symbol>
    <symbol id="arrow-left" viewBox="-463 265 32 32">
      <path d="M-454.8 281l11.3 11.3 4.3-4.2-7.1-7.1 7.1-7.1-4.3-4.2z"/>
    </symbol>
    <symbol id="arrow-right" viewBox="-463 265 32 32">
      <path d="M-439.2 281l-11.3-11.3-4.3 4.2 7.1 7.1-7.1 7.1 4.3 4.2z"/>
    </symbol>
    <symbol id="audiences" viewBox="0 0 32 32">
      <g><path d="M11.5 11.4c0 1.9 1.2 3.6 2.8 4.3.6.2 1.2.4 1.8.4 2.6 0 4.7-2.1 4.7-4.7 0-1.9-1.2-3.6-2.8-4.3-.6-.2-1.2-.4-1.8-.4-2.6.1-4.7 2.1-4.7 4.7zM22.8 11.1c.4.1.7.1 1.1.1 2.6 0 4.7-2.1 4.7-4.7s-2.1-4.7-4.7-4.7c-2.2 0-4.1 1.6-4.5 3.6 2 1.3 3.3 3.3 3.4 5.7zM14.2 16C10.9 16 8 20.4 8 23.7V28.6l.3.1c3.1 1 3.8 1.2 7.6 1.2 4.4 0 7.6-1.5 7.7-1.6l.4-.3v-4.4c0-2.9-1.9-6.4-4.6-7.2-.4-.1-.8-.4-1.2-.4h-4zM8 11.3c.5 0 1-.1 1.5-.3.1-2.2 1.3-4.1 3.1-5.2-.4-2.2-2.3-3.9-4.6-3.9-2.6 0-4.6 2.1-4.6 4.7s2 4.7 4.6 4.7zM6 23.7c0-3.1 2-6.5 4.8-8.1C10 14.5 9.6 13 9.5 12H6c-3.3 0-6 2.3-6 5.6v6.3l.3.1c2.1.7 3.6 1 5.6 1.2v-1.5zM25.9 12h-3.1c0 1-.5 2.5-1.3 3.6.9.5 1.7 1.1 2.4 2.1 1.3 1.7 2.1 3.8 2.1 5.9V25c3.4-.2 5.4-.9 5.6-1h.4v-6.4c0-3.3-2.8-5.6-6.1-5.6z"/></g>
    </symbol>
    <symbol id="calendar" viewBox="0 0 32 32">
      <path d="M22 2V0h-4v2h-6V0H8v2H0v30h30V2h-8zM10 28H4v-6h6v6zm0-8H4v-6h6v6zm8 8h-6v-6h6v6zm0-8h-6v-6h6v6zm0-8H4V6h14v6zm8 16h-6v-6h6v6zm0-8h-6v-6h6v6zm0-8h-6V6h6v6z"/>
    </symbol>
    <symbol id="check" viewBox="-595 381 32 32">
      <path d="M-564.2 389l-4.3-4.3-15.2 15.2-6.1-6.1-4.2 4.3 10.3 10.3"/>
    </symbol> -->
    <symbol id="clipboard" viewBox="0 0 32 32">
      <g><path d="M10 12h12v4H10zM10 20h12v4H10zM18 2V0h-4v2H2v30h28V2H18zm8 26H6V6h4v2h12V6h4v22z"/></g>
    </symbol>
    <!-- <symbol id="close" viewBox="-289 381 32 32">
      <path d="M-261.7 389.8l-4.2-4.2-7.1 7.1-7.1-7.1-4.2 4.2 7.1 7.1-7.1 7.1 4.2 4.2 7.1-7.1 7.1 7.1 4.2-4.2-7.1-7.1z"/>
    </symbol>
    <symbol id="code" viewBox="0 0 32 32">
      <g><path d="M8 25.4c-.4 0-.8-.2-1.1-.5L.3 17c-.4-.5-.4-1.3 0-1.8l6.2-7.9c.5-.7 1.5-.9 2.1-.4.6.5.7 1.4.3 2L3.3 16l5.8 7c.5.6.4 1.5-.2 2-.3.2-.6.4-.9.4zM24 25.4c-.3 0-.7-.1-.9-.3-.6-.5-.7-1.4-.2-2l5.7-7.1-5.5-7c-.5-.6-.4-1.5.3-2 .6-.5 1.5-.4 2 .3l6.1 7.9c.4.5.4 1.3 0 1.8L25 24.9c-.2.3-.6.5-1 .5zM13.7 27.8c-.1 0-.2 0-.3-.1-.7-.2-1.2-.9-1.1-1.7l4.9-20.8c.2-.7 1-1.2 1.8-1 .7.2 1.2.9 1.1 1.7l-4.9 20.8c-.3.7-.9 1.1-1.5 1.1z"/></g>
    </symbol>
    <symbol id="collaborators" viewBox="0 0 32 32">
      <g><circle cx="9" cy="7" r="5"/><circle cx="23" cy="7" r="5"/><path d="M32 32v-.2L28 16c0-1.1-.9-2-2-2h-6c-1.1 0-2 .9-2 2v16h14zM13.9 32l.1-.2V15.9c0-1.1-1-1.9-2.1-1.9h-6c-1.1 0-1.9.8-1.9 1.9L0 31.8l-.1.2h14z"/></g>
    </symbol>
    <symbol id="dimensions" viewBox="0 0 32 32">
      <g><path fill="#fff" d="M17 2L2 8l14.9 6L32 7.9 17 2z"/><path d="M16 30L2 24V10l14 6zM30 12.6v9.8l-10 4.9v-9.8l10-4.9m2-2.7l-14 6v14l14-6v-14z"/><path fill="#fff" d="M30 12.6v9.8l-10 4.9v-9.8l10-4.9"/><path stroke="#000" stroke-width="2" stroke-miterlimit="10" d="M30 8M4 8" fill="none"/><path d="M17 4.1L27.2 8l-10.3 4L6.7 8 17 4.1M17 2L2 8l14.9 6L32 7.9 17 2z"/></g>
    </symbol>
    <symbol id="duplicate" viewBox="0 0 32 32">
      <g><path d="M22 32H2c-1.1 0-2-.9-2-2V9.9c0-1.1.9-2 2-2h20c1.1 0 2 .9 2 2V30c0 1.1-.9 2-2 2zM30 0H10C8.9 0 8 .9 8 2v2h18c1.1 0 2 .8 2 1.9V24h2c1.1 0 2-.8 2-1.9V2c0-1.1-.9-2-2-2z"/><path fill="#fff" d="M18 18h-4v-4h-4v4H6v4h4v4h4v-4h4z"/></g>
    </symbol>
    <symbol id="editor-switch" viewBox="0 0 16 16">
      <path fill="#fff" d="M10.2 7.4v-2c0-1.7-1.4-3-3-3h-.6c-1.6 0-3 1.3-3 3v2c0 1.7 1.4 3 3 3h.6c1.6 0 3-1.3 3-3z"/><path d="M9.9 10.9h-6c-.5 0-.9-.4-.9-.9V2.8c0-.5.4-.9.9-.9h6c.5 0 .9.4.9.9v7.3c-.1.5-.5.8-.9.8zm-5.8-1h5.5V3H4.1v6.9z"/><path fill="#fff" d="M12.3 10.5v-2c0-1.7-1.3-3-3-3h-.6c-1.6 0-3 1.4-3 3v2c0 1.6 1.3 3 3 3h.6c1.6 0 3-1.3 3-3z"/><path d="M12 14.1H6c-.5 0-.9-.4-.9-.9V5.9c0-.5.4-.9.9-.9h6c.5 0 .9.4.9.9v7.3c-.1.5-.5.9-.9.9zM6.2 13h5.5V6.1H6.2V13zM15.2 6.6l-1-.3c.2-.7 0-1.3-.4-1.8-.5-.5-1.3-.6-2-.3l-.4-1c1.1-.5 2.3-.3 3.1.4.7.8 1 1.9.7 3zM13.7 5.3L13.6 8 16 6.8zM3.2 13c-.8 0-1.6-.3-2.2-1-1.1-1.2-1.3-3-.6-4.5l1 .5c-.6 1.1-.4 2.4.4 3.3.6.6 1.4.8 2.3.4l.4 1c-.5.2-.9.3-1.3.3zM1.8 8.9l.3-2.7-2.5 1z"/>
    </symbol>
    <symbol id="experiments" viewBox="0 0 32 32">
      <g><path d="M0 22v10h32V14l-10 6-12-4zM22 12.1l-12-4-10 6v-4L10 4l12 4 10-6.4V6z"/></g>
    </symbol>
    <symbol id="external" viewBox="-752 644.1 31 30.9">
      <g><path d="M-726 644.9c0-.2-.1-.4-.2-.6-.2-.2-.3-.2-.6-.2l-7.6.1c-.3 0-.6.2-.7.5-.1.2-.1.6.1.8l7.6 7.7c.2.2.5.2.8.1.3-.2.5-.4.5-.7l.1-7.7M-740.8 656.8l2.2 2.2 11.1-11.1-2.2-2.2-11.1 11.1"/><path d="M-731.2 658.1v8.8h-17.6v-17.6h8.8v-3.2h-12v24h24v-12z"/></g>
    </symbol>
    <symbol id="goal" viewBox="0 0 32 32">
      <g><path d="M2 .1C3 .1 4 1 4 2v30H0V2C0 1 .9.1 2 .1zM25 6.2c2.4 0 5.5-1.3 6.9-2.3v18.6c-1.4 1-4.6 2.3-6.9 2.3s-4.5-.7-5.9-1.7c-1.4-1-2.8-1.7-5.1-1.7-2.4 0-4.5 1.5-6 2.5V5.3c1.4-1 3.6-2.5 6-2.5s3.7.7 5.1 1.7 3.5 1.7 5.9 1.7z"/></g>
    </symbol>-->
    <symbol id="hamburger" viewBox="0 0 32 32">
      <path d="M28 8H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 18H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 28H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2z"/>
    </symbol>
    <!--<symbol id="history" viewBox="0 0 32 32">
      <g><path d="M18 2C10.9 2 5.1 7.2 4.2 14H0l6 6 6-6H7.2c.9-5.1 5.4-9 10.8-9 6.1 0 11 4.9 11 11s-4.9 11-11 11c-4 0-7.6-2.2-9.5-5.5l-2.2 2.2C8.8 27.5 13.1 30 18 30c7.7 0 14-6.3 14-14S25.7 2 18 2zM16 8h4v8h-4zM20.9 23.9L24 22l-4-6h-4z"/></g>
    </symbol>
    <symbol id="inconclusive" viewBox="0 0 32 32">
      <circle fill="#fff" cx="16" cy="15.9" r="15.9"/><path d="M16 3c7.1 0 12.9 5.8 12.9 12.9s-5.8 13-12.9 13-13-5.8-13-13S8.8 3 16 3m0-3C7.2 0 0 7.1 0 15.9s7.2 16 16 16S31.9 24.8 31.9 16 24.8 0 16 0zM14 6h4v12h-4zM14 14h10v4H14z"/>
    </symbol>
    <symbol id="integrations" viewBox="0 0 32 32">
      <g><path d="M25.5 9.3c.1.4.2.8.2 1.2.1.8 0 1.8-.1 2.5 2.1 1.7 3.4 4.2 3.4 7 0 5-4 9-9 9s-9-4-9-9c0-4.6 3.4-8.3 7.8-8.9 0-.4-.1-1.1-.4-1.9-.2-.4-.3-.8-.5-1C12.3 9.2 8 14.1 8 20c0 6.6 5.4 12 12 12s12-5.4 12-12c0-4.6-2.6-8.7-6.5-10.7zM12 0C5.4 0 0 5.4 0 12c0 4.4 2.4 8.3 6 10.4-.1-.8-.2-1.6-.2-2 0-.4.1-1.2.2-1.7C4.1 17 3 14.6 3 12c0-5 4-9 9-9s9 4 9 9c0 4.5-3.3 8.3-7.7 8.9 0 .5 0 .9.3 1.5.3.7.4 1 .7 1.3 5.5-1.1 9.6-6 9.6-11.8C24 5.4 18.6 0 12 0z"/></g>
    </symbol>
    <symbol id="live-variables" viewBox="0 0 32 32">
      <g><path d="M30 0h-6c-1.1 0-2 .9-2 2s.9 2 2 2h4v24h-4c-1.1 0-2 .9-2 2s.9 2 2 2h6c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM2 32h6c1.1 0 2-.9 2-2s-.9-2-2-2H4V4h4c1.1 0 2-.9 2-2s-.9-2-2-2H2C.9 0 0 .9 0 2v28c0 1.1.9 2 2 2zM22.2 20.7c-.2 0-.6.1-.7.1-1.1 0-3.1-.5-3.9-3.9l5.8-5.9s1.2-1.2.4-2.3c-.3-.6-1.8-1-2.6-.2l-4.3 4.3C15 8.4 11.1 8 9.7 8S8 9.8 8 10.8c0 1 .9 2.1 2.2 2.2s3.2-.2 4.1 3.2l-5.6 5.3c-.3.3-.5.6-.5 1.1 0 .5.2.8.5 1.1.3.4.8.3 1.3.3s.9 0 1.4-.4l3.8-4.1c1.9 4.2 5.3 4.5 6.7 4.5 0 0 2.1-.1 2.1-2 0-1.2-1-1.3-1.8-1.3z"/></g>
    </symbol>
    <symbol id="lock" viewBox="0 0 32 32">
      <g><path d="M26 12c0-5.5-4.5-10-10-10S6 6.5 6 12c-1.2 0-2 .9-2 2v16c0 1.1.8 2 1.9 2h20c1.1 0 2-.9 2-2V14c.1-1.1-.8-2-1.9-2zm-4.1 0h-13c0-3.9 3.1-7 7-7s7 3.1 7 7h-1z"/><path fill="#fff" d="M20 20c0-2.2-1.8-4-4-4s-4 1.8-4 4c0 1.5.8 2.8 2 3.4V26c0 1.1.9 2 2 2s2-.9 2-2v-2.6c1-.7 2-1.9 2-3.4z"/></g>
    </symbol>
    <symbol id="loser" viewBox="0 0 32 32">
      <circle cx="16" cy="16" r="16"/><path fill="#fff" d="M14 6h4v14h-4zM14 22h4v4h-4z"/>
    </symbol>
    <symbol id="paperclip" viewBox="0 0 32 32">
      <path d="M15.6 32c-4.1 0-8.2-2.4-8.2-7V6.8c0-4.5 2.9-6.8 5.8-6.8S19 2.4 19 6.8v15.8c0 2.6-1.7 3.9-3.4 3.9-.9 0-1.8-.4-2.4-1-.5-.5-1-1.4-1-2.9V8c0-.6.4-1 1-1s1 .4 1 1v14.6c0 1.3.7 1.9 1.4 1.9s1.4-.6 1.4-1.9V6.8C17 3.5 15 2 13.2 2S9.3 3.5 9.3 6.8V25c0 3.4 3.2 5 6.2 5s6.2-1.6 6.2-5V8c0-.6.4-1 1-1s1 .4 1 1v17c.1 4.6-4 7-8.1 7z"/>
    </symbol>
    <symbol id="pause" viewBox="0 0 32 32">
      <g><path d="M6 4h8v24H6zM18 4h8v24h-8z"/></g>
    </symbol>
    <symbol id="play" viewBox="0 0 32 32">
      <path d="M4 4v24l23.9-12z"/>
    </symbol>
    <symbol id="projects" viewBox="0 0 32 32">
      <g><path d="M2 4h4v4H2zM10 4h20v4H10zM2 14h4v4H2zM10 14h20v4H10zM2 24h4v4H2zM10 24h20v4H10z"/></g>
    </symbol>
    <symbol id="redo" viewBox="-471 274 16 14">
      <g><path d="M-455.7 279l-3.7 3.6c-.2.2-.4.2-.6.1-.2-.1-.3-.2-.3-.4v-7.4c0-.2.1-.4.3-.4.2-.1.4 0 .6.1l3.7 3.6c.1.1.2.2.2.4-.1.1-.1.2-.2.4"/><path d="M-465.9 277.8h8.9v1.6h-8.9c-1.7 0-3 1.3-3 3v.4c0 1.6 1.4 3 3 3h1.8c.4 0 .8.3.8.8 0 .4-.4.8-.8.8h-1.8c-2.6 0-4.6-2-4.6-4.5v-.4c-.1-2.7 2-4.7 4.6-4.7"/></g>
    </symbol>
    <symbol id="refresh" viewBox="0 0 32 32">
      <path d="M24.6 9.5l-2.2 2.2c.7 1.2 1.1 2.5 1.1 3.9 0 4.3-3.5 7.8-7.8 7.8s-7.8-3.5-7.8-7.8 3.5-7.8 7.8-7.8h.3V13l4.7-4.7 1.6-1.6L16 .5v4.4h-.3C9.8 4.9 5 9.7 5 15.6c0 5.9 4.8 10.8 10.8 10.8 5.9 0 10.8-4.8 10.8-10.8-.1-2.2-.8-4.4-2-6.1z"/>
    </symbol>
    <symbol id="save" viewBox="-472 273 15 16">
      <g><path d="M-458.9 273.9v6H-470v-6h-1.7v13.4c0 .5.4.9.9.9h12.6c.5 0 .9-.4.9-.9v-11.8l-1.6-1.6"/><path d="M-463 273.9h2.4v4.8h-2.4v-4.8z"/></g>
    </symbol>-->
    <symbol id="search-16" viewBox="0 0 16 16">
       <g><g><path d="M6.21,12.417C2.786,12.417,0,9.632,0,6.209C0,2.785,2.786,0,6.21,0c3.422,0,6.206,2.785,6.206,6.209
			C12.416,9.632,9.632,12.417,6.21,12.417z M6.21,1C3.337,1,1,3.337,1,6.209s2.337,5.208,5.21,5.208c2.87,0,5.206-2.336,5.206-5.208
			S9.08,1,6.21,1z"/> <path d="M15.5,16c-0.128,0-0.256-0.049-0.354-0.146l-5.25-5.25c-0.195-0.195-0.195-0.512,0-0.707s0.512-0.195,0.707,0l5.25,5.25
			c0.195,0.195,0.195,0.512,0,0.707C15.756,15.951,15.628,16,15.5,16z"/></g></g>
    </symbol>
    <!--
    <symbol id="settings" viewBox="0 0 32 32">
      <path d="M30.8 13.5l-3.1-.5c-.2-.9-.6-1.8-1-2.6l2-2.5c.4-.5.4-1.3 0-1.8l-1.2-1.4c-.5-.6-1.3-.7-1.8-.3L23 6.1c-1.2-.8-2.5-1.4-4-1.8l-.5-3.1C18.4.5 17.8 0 17.2 0h-1.9c-.7 0-1.3.5-1.4 1.2l-.5 3.1c-1.2.3-2.3.8-3.3 1.4L7.5 3.9c-.5-.4-1.3-.4-1.8.1L4.4 5.3c-.5.5-.5 1.3-.1 1.8l1.8 2.6c-.6 1-1.1 2.1-1.4 3.3l-3.2.5c-.7.1-1.2.7-1.2 1.4v1.9c0 .7.5 1.3 1.2 1.4l3.2.5c.2 1 .6 1.9 1 2.8l-2 2.5c-.4.5-.4 1.3 0 1.8l1.2 1.4c.5.5 1.2.6 1.8.3l2.7-1.7c1.1.8 2.4 1.4 3.8 1.7l.5 3.1c.1.7.7 1.2 1.4 1.2H17c.7 0 1.3-.5 1.4-1.2l.5-3.1c1.2-.3 2.3-.7 3.3-1.4l2.7 1.9c.5.4 1.3.3 1.8-.1l1.3-1.3c.5-.5.5-1.2.1-1.8l-1.9-2.6c.6-1 1.1-2.1 1.4-3.3l3.1-.5c.7-.1 1.2-.7 1.2-1.4v-1.9c.1-.9-.4-1.5-1.1-1.6zm-14.6 8.2c-3.3 0-5.9-2.7-5.9-5.9 0-3.3 2.7-5.9 5.9-5.9 3.3 0 5.9 2.7 5.9 5.9.1 3.3-2.6 5.9-5.9 5.9z"/>
    </symbol>
    <symbol id="star" viewBox="0 0 32 32">
      <path d="M16 2l3.7 10.7h11.1l-8.9 6.7L25.2 30 16 23.7 6.9 30l3.2-10.6-8.8-6.7h11.1z"/>
    </symbol>
    <symbol id="sync" viewBox="0 0 32 32">
      <g><path d="M24.6 9.5l-1.9 1.9c1.9 3.1 1.4 7.3-1.3 10-2 2-4.4 2.7-7.4 2.2v-5l-4.6 4.7-1.6 1.6 6.2 6.3v-4.8c3 .5 6.8-.5 9.3-3 3.7-3.9 4.2-9.8 1.3-13.9zM10.1 9.9C11.7 8.3 14 7.5 16 7.6v5.5l4.7-4.7 1.6-1.6L16 .5v4.4c-3 0-5.6 1-7.8 3.1-3.6 3.6-4.1 9-1.6 13.1l2-2c-1.5-2.9-1-6.7 1.5-9.2z"/></g>
    </symbol>
    <symbol id="trash" viewBox="0 0 32 32">
      <g><path d="M8-.1h14V2H8zM2 2h26v6H2zM4 10h22v22H4z"/></g>
    </symbol>
    <symbol id="undo" viewBox="-471 274 16 14">
      <g><path d="M-470.3 279l3.7 3.6c.2.2.4.2.6.1.2-.1.3-.2.3-.4v-7.4c0-.2-.1-.4-.3-.4-.2-.1-.4 0-.6.1l-3.7 3.6c-.1.1-.2.2-.2.4.1.1.1.2.2.4"/><path d="M-460.1 277.8h-8.9v1.6h8.9c1.7 0 3 1.3 3 3v.4c0 1.6-1.4 3-3 3h-1.8c-.4 0-.8.3-.8.8 0 .4.4.8.8.8h1.8c2.6 0 4.6-2 4.6-4.5v-.4c.1-2.7-2-4.7-4.6-4.7"/></g>
    </symbol>
    <symbol id="userlist" viewBox="0 0 32 32">
      <g><path d="M15.075 6.574c0 2.96-2.398 5.36-5.358 5.36-2.96 0-5.36-2.4-5.36-5.36 0-2.96 2.4-5.36 5.36-5.36 2.96 0 5.358 2.4 5.358 5.36"/><path d="M.57 26.43s-1.63-14.7 8.932-14.7c10.562 0 8.784 14.7 8.784 14.7s-3.22 1.186-8.846 1.186c-5.625 0-8.87-1.187-8.87-1.187"/><path d="M30.642 4.176H17.23c-.373 0-.675-.302-.675-.674v-1.7c0-.373.302-.675.675-.675h13.412c.373 0 .675.302.675.674v1.702c0 .372-.302.674-.675.674"/><path d="M30.642 18.303h-8.84c-.373 0-.675-.303-.675-.674v-1.703c0-.373.302-.674.674-.674h8.842c.373 0 .675.3.675.674v1.702c0 .37-.302.673-.675.673"/><path d="M30.642 11.446H19.515c-.372 0-.674-.303-.674-.675v-1.7c0-.373.303-.675.675-.675h11.127c.373 0 .675.302.675.675v1.7c0 .373-.302.676-.675.676"/><path d="M30.642 25.57h-6.555c-.373 0-.674-.3-.674-.673v-1.7c0-.373.3-.675.674-.675h6.555c.373 0 .675.302.675.675v1.7c0 .373-.302.674-.675.674"/></g>
    </symbol>
    <symbol id="variation-settings" viewBox="0 0 32 32">
      <g><path d="M12 12.6v-.7c-.5-2.1-2-3.8-4-4.5V0H4v7.3c-2.3.8-4 3-4 5.7s1.7 4.8 4 5.7V32h4V18.7c2-.7 3.5-2.5 3.9-4.6V13s.1-.3.1-.4zM6 16c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zM22 21.6v-.7c-.4-2.1-1.9-3.9-3.9-4.6V0h-4v16.3c-2.3.8-4 3-4 5.7s1.7 4.8 4 5.7V32h4v-4.3c2-.7 3.5-2.5 3.9-4.6v-1.5zM16 25c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zM32 9.6v-.7c-.5-2.1-2-3.8-4-4.5V0h-4v4.3c-2 .8-4 3-4 5.7s2 4.8 4 5.7V32h4V15.7c2-.7 3.5-2.5 3.9-4.6V10s.1-.3.1-.4zM26 13c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.4 3-3 3z"/></g>
    </symbol>
    <symbol id="winner" viewBox="0 0 32 32">
      <circle cx="16" cy="16" r="16"/><path fill="#fff" d="M16.9 21.5l7.8-12.4-3.6-2.3L13.2 19l-3.6-2.3-2.3 3.6 6.8 4.5.4.3.5-.6z"/>
    </symbol> -->
</svg>


  <header id="header" class="header justify background--super-dark">
    
    <div class="link--reverse hidden is-inline-block-on-mobile nav-toggle">
      <label for="toggle-nav-checkbox">
        <svg class="icon">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#hamburger"></use>
        </svg>
      </label>
    </div>
    

    <a class="display--inline-block header-logo-container" href="/">
      <img src="/assets/img/optimizely-developer-logo.svg" alt="Optimizely Developers">
    </a>

    <div class="header-links display--inline-block vertical-align--top is-hidden-on-mobile">
      <div class="position--relative display--inline-block push-double--right">
        <input type="text" id="site-search" placeholder="Search" class="text-input text-input--small reverse soft-triple--right width--200">
        <svg class="icon input-icon__right reverse cursor--pointer">
          <use xlink:href="#search-16"></use>
        </svg>
      </div>

      <div class="display--inline-block">
        <ul class="unstyled nav">
          <li class="push-double--right"><a href="/overview">Overview</a></li>
          <li class="position--relative push-double--right">
            <a href="/rest/introduction" data-collapser>
              Documentation
              <span class="arrow-inline--down"></span>
            </a>
            <ul class="unstyled nav nav--stacked dropdown background--super-dark soft--sides collapsible--small is-collapsed" data-auto-close>
              
                
              
                
                  <li class="push-half">
                    <a href="/javascript/">Web</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/ios/">iOS</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/android/">Android</a>
                  </li>
                
              
                
              
                
                  <li class="push-half">
                    <a href="/rest/">REST API</a>
                  </li>
                
              
                
              
                
                  <li class="push-half">
                    <a href="/integrations/">Integrations</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/apps/">Apps</a>
                  </li>
                
              
                
              
            </ul>
          </li>
          <li class="push-double--right"><a href="http://community.optimizely.com/t5/Developers/bd-p/Developers" target="_blank">Discussion</a></li>
          <li class="flush"><a href="https://devplatform.typeform.com/to/XrDLzQ">Feedback</a></li>
        </ul>
      </div>
    </div>
  </header>


  <main id="main" class="main has-nav">
    <input id="toggle-nav-checkbox" class="hidden" type="checkbox">
<nav id="nav">
  <div class="nav-sidebar">

    <div class="soft-double">
      
        
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/overview">Overview</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Solutions</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/javascript" data-collapser>Web</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/javascript/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/code-samples/index.html">Code Samples</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/personalization/index.html">Personalization</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section active" href="/ios" data-collapser>iOS</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible">
                    
                      <li>
                        <a class="section" href="/ios/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section active" href="/ios/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/faqs/index.html">FAQs</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/guide/index.html">Tutorial</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/changelog/index.html">Changelog</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/articles/index.html">Articles</a>
                        
                        
                          <ul class="unstyled nav nav--stacked">
                            <!-- Only show sibling data if it exists. -->
                            
                          </ul>
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                      <li>
                        <a class="section" href="/ios/help/html/index.html" target="_blank">Apple Docs <img class="display--inline-block" width="12" height="12" src="/assets/img/external-link.png"></a>
                      </li>
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/android" data-collapser>Android</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/android/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/faqs/index.html">FAQs</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/guide/index.html">Tutorial</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/changelog/index.html">Changelog</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/articles/index.html">Articles</a>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                      <li>
                        <a class="section" href="/android/help/index.html" target="_blank">Java Docs <img class="display--inline-block" width="12" height="12" src="/assets/img/external-link.png"></a>
                      </li>
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Management</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/rest" data-collapser>REST API</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/rest/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/conditions/index.html">Audience Conditions</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Authentication</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/oauth">OAuth 2.0</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/token">Token based</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Data Services</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/events" data-collapser>Event Access</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/events/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/events/api/index.html">Event API</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/events/export/index.html">Data Export</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/customer-profiles">Customer Profiles</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/results">Experiment Results</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Add Ons</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/integrations">Integrations</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/apps">Apps</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/extensions">Extensions</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Community</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/libs">Libraries</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
    </div>
  </div>
</nav>


    <div id="content" class="content soft-double max-width--reading">
      <h1 id="optimizely-ios-sdk-reference">Optimizely iOS SDK Reference</h1>
<p>This section provides information on how to customize your SDK installation and code snippets for how to implement Optimizely&#39;s APIs.</p>
<p>Key things you can do include:</p>
<ul>
<li><a href="#programmatically-enable-edit-mode">Programmatically connect to Optimizely&#39;s web editor</a></li>
<li><a href="#disable-gesture">Disable gesture</a> (The gesture is disabled by default in your live app)</li>
<li><a href="#disable-visual-editor">Disable the visual editor</a></li>
<li><a href="#register-live-variables">Register live variables</a></li>
<li><a href="#code-blocks">Implement code blocks</a></li>
<li><a href="#goal-tracking">Custom Event and Revenue Tracking</a></li>
<li><a href="#analytics-integrations">Implement custom and default analytics integrations</a></li>
</ul>
<h2 id="custom-initialization">Custom Initialization</h2>
<p>By default, Optimizely is initialized synchronously with a max 2 second timeout.  Optimizely can also be initialized asynchronously, which is a non-blocking call.  If you choose to load Optimizely asynchronously, you will need to use the callback to ensure that Optimizely variables and code blocks are accessed after Optimizely start has been completed.  If Optimizely variables and code blocks are accessed prior to Optimizely start being completed, no experiments will run.</p>
<pre><code class="lang-obj-c">[Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN
                          launchOptions:launchOptions
              experimentsLoadedCallback:^(BOOL success, NSError *error) {...}];
</code></pre>
<h2 id="connecting-to-optimizely-s-editor">Connecting to Optimizely&#39;s Editor</h2>
<p>It is highly recommended to use Optimizely&#39;s &#39;O&#39; gesture to connect your app to Optimizely&#39;s editor.  However, there are other options should you choose not to implement Optimizely&#39;s URL scheme.</p>
<h3 id="programmatically-enable-edit-mode">Programmatically Enable Edit Mode</h3>
<p>Typically Optimizely&#39;s &#39;O&#39; gesture will put your app into Edit Mode, which will then allow you to connect with Optimizely&#39;s editor.  However, if you choose not to implement the URL scheme in your app or are unable to put the app into &#39;Edit Mode&#39;, prior to <code>startOptimizelyWithAPIToken</code>, you can call <a href="/ios/help/html/Classes/Optimizely.html#//api/name/enableEditor">enableEditor</a> in the development version of your app so that you can make changes.</p>
<pre><code class="lang-obj-c">[Optimizely enableEditor];
[Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<p> <strong>Note that you should always remove the enableEditor call prior to releasing your app to the App store.</strong></p>
<h3 id="disable-gesture">Disable Gesture</h3>
<p>By default, Optimizely&#39;s iOS SDK disables the gesture if the app is live in the App store.  However, if you would like to ensure that your end users are not able to put the app into edit mode (e.g. if you have an enterprise app that you release to internal employees), you can call the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/disableGesture">disableGesture</a> method prior to <code>startOptimizelyWithAPIToken</code>.</p>
<p>An example of how to implement this method can be found below:</p>
<pre><code class="lang-obj-c">[Optimizely sharedInstance].disableGesture = YES;
[Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<h2 id="visual-editor-configuration">Visual Editor Configuration</h2>
<p>The Optimizely Visual Editor allows you to modify existing views in your app. The first time you connect your app to Optimizely&#39;s Visual Editor, you can see which views are automatically detected by Optimizely.  Optimizely is able to detect and allows you to modify these views by:</p>
<ul>
<li>Dynamically tagging all views with an Optimizely ID</li>
<li>Optimizely uses swizzling to enable view changes</li>
</ul>
<h3 id="tag-your-views">Tag Your Views</h3>
<p>There are some cases where Optimizely will not be able to detect your views.  For those views, you should give them a unique <code>optimizelyId</code>.  An example of how to do this is below:</p>
<pre><code class="lang-obj-c">UILabel *label = [[UILabel alloc] initWithFrame:...];
label.optimizelyId = @&quot;pricing-title-label&quot;;
</code></pre>
<p>Cases where you will typically have to tag your views include if you would like to be able to modify a specific <a href="#tableview">TableView cell</a>.</p>
<h3 id="disable-automatic-tagging">Disable Automatic Tagging</h3>
<p>If you decide you do not want views to be automatically tagged with an optimizelyId, you can set the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/shouldNotGenerateDynamicIds">shouldNotGenerateDynamicIds</a> property to YES.</p>
<h3 id="disable-visual-editor">Disable Visual Editor</h3>
<p>If you decide you want to exclusively use Live Variables and Code Blocks, you can set the  <a href="/ios/help/html/Classes/Optimizely.html#//api/name/disableSwizzle">disableSwizzle</a> property to YES.</p>
<p><strong>Note: Disabling the Visual Editor will also disable the ability to track tap goals. If you disable the Visual Editor, you&#39;ll need to rely only on view goals and custom event goals to track conversions.</strong></p>
<h2 id="register-live-variables">Register Live Variables</h2>
<p><a href="/ios/help/html/Classes/Optimizely.html#task_Live%20Variables">Live Variables</a> allow you to designate variables in your app that can be assigned values in the Optimizely editor.  These values can be modified by Optimizely&#39;s editor even after you have released your app to the app store.  For example, you might want to create an experiment that tests various values for gravity.  In order to create an Optimizely Live Variable, first define a corresponding <code>OptimizelyVariableKey</code> as follows:</p>
<h4 id="objective-c-example">Objective-C Example</h4>
<pre><code class="lang-obj-c">#import &lt;Optimizely/Optimizely.h&gt;

// This line defines an OptimizelyVariableKey called myGravityVariable with a default value of 9.8
OptimizelyVariableKeyForNumber(myGravityVariable, @9.8f);

@implementation MyViewController

...

@end
</code></pre>
<p>or, if you&#39;re using Swift, declare your <code>OptimizelyVariableKey</code>s in your AppDelegate&#39;s top level. <code>#define</code> macros do not work in Swift so you&#39;ll have to manually pre-register these keys in the <code>application:didFinishLaunchingWithOptions:</code> method before calling <code>startOptimizelyWithAPIToken</code>. Here&#39;s an example of an AppDelegate.swift:</p>
<h4 id="swift-example">Swift Example</h4>
<pre><code class="lang-swift">import Optimizely

internal var myGravityVariableKey: OptimizelyVariableKey = OptimizelyVariableKey.optimizelyKeyWithKey(&quot;myGravityVariable&quot;, defaultNSNumber: 9.8)

@UIApplicationMain class AppDelegate: UIResponder, UIApplicationDelegate {

   var window: UIWindow?

   func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {

       // Make sure to pre-register your keys before starting Optimizely
       Optimizely.preregisterVariableKey(myGravityVariableKey)

       Optimizely.startOptimizelyWithAPIToken(&quot;YOUR_API_TOKEN&quot;, launchOptions: launchOptions)
       return true
   }
}
</code></pre>
<p>By defining your variable key at the top level of the AppDelegate.swift and specifying it as <code>internal</code>, you&#39;ll be able to access them throughout your target.</p>
<p>This defines an Optimizely variable key called <code>myGravityVariable</code> with a default value of 9.8.  Once a variable key is defined, variations can change the value for variables accessed via this key.</p>
<p>The provided <code>OptimizelyVariableKeyFor[type]</code> macro (<a href="/ios/help/html/Classes/Optimizely.html#task_Live%20Variables">list of types</a>) is the suggested method for defining an <code>OptimizelyVariableKey</code> as it will allow the web editor to detect Live Variables right when it connects your application. <strong>Note that keys must be defined outside of the function scope.</strong></p>
<p>In order to access the variable, call <code>numberForKey</code> and provide the corresponding variable key:</p>
<h4 id="objective-c-example">Objective-C Example</h4>
<pre><code class="lang-obj-c">#import &lt;Optimizely/Optimizely.h&gt;

// This line defines an OptimizelyVariableKey called myGravityVariable
OptimizelyVariableKeyForNumber(myGravityVariable, @9.8f);

@implementation MyViewController

- (void) someFunction {
    // This line reads myGravityVariable and stores it in &quot;gravity&quot;
    NSNumber *gravity = [Optimizely numberForKey:myGravityVariable];

    // Use gravity...
    NSLog(@&quot;Gravity for this variation is %@&quot;, gravity);
}

@end
</code></pre>
<h4 id="swift-example">Swift Example</h4>
<pre><code class="lang-swift">import Optimizely

func someFunction() {
    // myGravityVariableKey was previously defined in our AppDelegate.swift at
    // the top level as an internal variable, so we can reference it here
    // in other parts of our application
    var gravity: NSNumber = Optimizely.numberForKey(myGravityVariableKey)

    // Use gravity...
    println(&quot;Gravity for this variation is \(gravity)&quot;)
}
</code></pre>
<p>You&#39;re now ready to implement your experiment using the Optimizely web editor:</p>
<ol>
<li>Load your application and connect in edit mode.</li>
<li>Navigate to the variables section of the editor.
<img src="/assets/img/ios/editor-variables-add-button.png" alt="Drawing" style="width: 50%; align:center"/></li>
<li>Click the &quot;Add Variable&quot; button to open a dialog where you can select variables to add to your experiment.</li>
<li>Once you have added a variable to the experiment, you can select a value for each variation in the variables section of the editor.</li>
<li>While in edit mode, changes to the variable will be applied on subsequent reads, thereby allowing you to quickly test your variable logic.  However, we recommend that you verify your variable tests in <a href="/ios/getting-started/index.html#preview-mode">preview mode</a> prior to going live with the experiment.</li>
<li>Once you&#39;ve connected your app to the editor, you can later edit live variables without connecting a device. However, if you make any changes to your app, make sure to connect it again to allow your changes to sync with the editor.</li>
</ol>
<p>For more details, please see the <a href="/ios/help/html/Classes/Optimizely.html#task_Live%20Variables">Live Variables API Reference</a></p>
<h3 id="register-variable-callback">Register Variable Callback</h3>
<p>By default, in Edit Mode, Optimizely&#39;s editor will apply variable value changes once the screen the variable is defined on is reloaded.  However, there may be times where you want the changed value of the variable to be reflected in your app without the screen being refreshed while you&#39;re making experiment changes.  To do so, you can use the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/registerCallbackForVariableWithKey:callback:">registerCallbackForVariableWithKey:callback:</a> method.</p>
<p>An example implementation of this can be found below:</p>
<pre><code class="lang-obj-c">[Optimizely registerCallbackForVariableWithKey:myVariableKey callback:^(NSString *key, id value) {
        NSLog(@&quot;The value of Optimizely&#39;s Live Variable: %@ is now %@\n&quot;, key, value);
        [self.tableView reloadData];
}];
</code></pre>
<h2 id="code-blocks">Code Blocks</h2>
<p>Code Blocks allow developers to create variations that execute different code paths.  For example, one use case might be to test various checkout flows.   In order to create a Code Block, first define a corresponding <code>OptimizelyCodeBlocksKey</code> as follows:</p>
<h4 id="objective-c-example">Objective-C Example</h4>
<pre><code class="lang-obj-c">#import &lt;Optimizely/Optimizely.h&gt;

// This line defines an OptimizelyCodeBlocksKey called myCheckoutTest
// Arguments after the first are descriptive names for the blocks
OptimizelyCodeBlocksKeyWithBlockNames(myCheckoutBlocksKey,
                                    @&quot;shortCheckout&quot;,
                                    @&quot;longCheckout&quot;);

@implementation MyViewController

...

@end
</code></pre>
<h4 id="swift-example">Swift Example</h4>
<pre><code class="lang-swift">import Optimizely

internal var myCheckoutBlocksKey: OptimizelyCodeBlocksKey = OptimizelyCodeBlocksKey(&quot;myCheckoutBlocksKey&quot;, blockNames: [&quot;shortCheckout&quot;, &quot;longCheckout&quot;])

@UIApplicationMain class AppDelegate: UIResponder, UIApplicationDelegate {

   var window: UIWindow?

   func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {

       // Make sure to pre-register your keys before starting Optimizely
       Optimizely.preregisterBlockKey(myCheckoutBlocksKey)
       Optimizely.startOptimizelyWithAPIToken(&quot;YOUR_API_TOKEN&quot;, launchOptions: launchOptions)

       return true
   }
}
</code></pre>
<p>By defining your block key at the top level of the AppDelegate.swift and specifying it as <code>internal</code>, you&#39;ll be able to access them throughout your target.</p>
<p>This defines an <code>OptimizelyCodeBlocksKey</code> called myCheckoutTest associated with block names &quot;shortCheckout&quot; and &quot;longCheckout.&quot; A Code Block can contain up to 4 named blocks.  Once a Code Block key is defined, variations can change the block that is executed for a particular variation.</p>
<p>The provided <code>OptimizelyCodeBlocksKeyWithBlockNames</code> macro is the suggested method for defining an OptimizelyCodeBlocksKey as it will allow the web editor to detect Code Blocks right when it connects to your application. Note that keys must be defined outside of the function scope.</p>
<p>Next, implement the Code Block as follows:</p>
<h4 id="objective-c-example">Objective-C Example</h4>
<pre><code class="lang-obj-c">#import &lt;Optimizely/Optimizely.h&gt;

// This line defines an OptimizelyCodeBlocksKey called myCheckoutBlocksKey
OptimizelyCodeBlocksKeyWithBlockNames(myCheckoutBlocksKey,
                                    @&quot;shortCheckout&quot;,
                                    @&quot;longCheckout&quot;);

@implementation MyViewController

- (void) someFunction {

    // This line defines Code Blocks &quot;shortCheckout&quot;, &quot;longCheckout&quot;, and a
    // default block that is executed in the case that the experiment is
    // not activated.
    [Optimizely codeBlocksWithKey:myCheckoutBlocksKey
                       blockOne:^{
        // This block is executed when myCheckoutTest -&gt; shortCheckout
        [self performSegueWithIdentifier:@&quot;shortCheckoutFlow&quot; sender:self];
    }
                       blockTwo:^{
        // This block is executed when myCheckoutTest -&gt; longCheckout
        [self performSegueWithIdentifier:@&quot;longCheckoutFlow&quot; sender:self];
    }
                   defaultBlock:^{
        // This block is executed by default
        [self performSegueWithIdentifier:@&quot;checkoutFlow&quot; sender:self];
    }];
}

@end
</code></pre>
<h4 id="swift-example">Swift Example</h4>
<pre><code class="lang-swift">import Optimizely

func someFunction() {
    // myCheckoutBlocksKey was previously defined in our AppDelegate.swift at
    // the top level as an internal variable, so we can reference it here in
    // other parts of our application
    Optimizely.codeBlocksWithKey(myCheckoutBlocksKey,
        blockOne: { self.performSegueWithIdentifier(&quot;shortCheckoutFlow&quot; sender:self) },
        blockTwo: { self.performSegueWithIdentifier(&quot;longCheckoutFlow&quot; sender:self) },
        defaultBlock: { self.performSegueWithIdentifier(&quot;checkoutFlow&quot; sender:self) })
}
</code></pre>
<p>You&#39;re now ready to implement your experiment using the Optimizely web editor:</p>
<ol>
<li>Load your application and connect in edit mode.</li>
<li>Navigate to the Code Blocks section of the editor.
<img src="/assets/img/ios/editor-codeblocks.png" alt="Drawing" style="width: 100%;"/></li>
<li>The editor will display your Code Blocks.  Use the drop down to select the desired Code Block for this variation.</li>
<li>While in edit mode, changes to the active block will be applied on subsequent executions, thereby allowing you to quickly test your Code Block&#39;s logic.  However, we recommend that you verify your Code Blocks in <a href="/ios/getting-started/index.html#preview-mode">preview mode</a> prior to going live with the experiment.</li>
<li>Once you&#39;ve connected your app to the editor, you can later edit code blocks without connecting a device. However, if you make any changes to your app, make sure to connect it again to allow your changes to sync with the editor.</li>
</ol>
<p>For more details, please see the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/codeBlocksWithKey:blockOne:defaultBlock:">Code Blocks API Reference</a></p>
<h3 id="register-code-block-callback">Register Code Block Callback</h3>
<p>By default, in Edit Mode, Optimizely&#39;s editor will apply code block branch changes once the code block is executed again.  However, there may be times where you want the new code block branch to be executed in your app without the screen being refreshed while you&#39;re making experiment changes.  To do so, you can use the <a href="/ios/help/html/Classes/Optimizely.html#//api/name//registerCallbackForCodeBlockWithKey:callback:">registerCallbackForCodeBlockWithKey:callback:</a> method.</p>
<p>An example implementation of this can be found below:</p>
<pre><code class="lang-obj-c">[Optimizely registerCallbackForCodeBlockWithKey:myCodeBlockKey callback:^() {
    // Calling renderViews will allow us to execute the code that wraps our code block
    [self renderViews];
}];
</code></pre>
<h3 id="phased-rollouts">Phased Rollouts</h3>
<p>A common use case for Code Blocks are phased rollouts.  Phased rollouts allow you to release a feature to a subset of users, which will help you mitigate the risk of crashes and help you understand how users will react to your new feature prior to rolling out a new feature to all users.  To learn more about to implement a phased rollout using Optimizely, you can refer to the article in Optiverse <a href="https://help.optimizely.com/hc/en-us/articles/206101447-Phased-rollouts-for-your-iOS-or-Android-App">here</a>.</p>
<h2 id="custom-targeting">Custom Targeting</h2>
<h3 id="attributes">Attributes</h3>
<p>Use attributes to segment your experiment results for more insight. This allows you to drill down into experiment results and discover how certain segments of users are behaving differently. This will allow you to create future experiments targeted to them.</p>
<p>To set the value for an Attribute use one of these two methods.</p>
<pre><code class="lang-obj-c">BOOL success = [Optimizely setValue:@&quot;value&quot; forAttributeId:@&quot;attributeId&quot;];
BOOL success = [Optimizely setValue:@&quot;value&quot; forAttributeApiName:@&quot;attributeApiName&quot;];
</code></pre>
<p>Both methods will return a boolean that determines whether the value was successfully set for the Attribute. If the string you passed in for the Attribute Id or the Attribute API Name do not match an Attribute in your project, it will return false. If Optimizely was able to locate the Attribute and set the value, it will return true. If you are using these methods before starting Optimizely, they will always return true even if the Attribute Id or Attribute API Name do not match an existing Attribute. If you use both <code>setValue:forAttributeId:</code> and <code>setValue:forAttributeApiName:</code> before starting Optimizely for the same attribute, <code>setValue:forAttributeId:</code> will override <code>setValue:forAttributeApiName:</code> when the Attribute is initialized.</p>
<p>To get the current value of an Attribute use one of these two methods.</p>
<pre><code class="lang-obj-c">NSString *value = [Optimizely getValueForAttributeId:@&quot;attributeId&quot;];
NSString *value = [Optimizely getValueForAttributeApiName:@&quot;attributeApiName&quot;];
</code></pre>
<p>Both methods will return an <code>NSString</code> object whose value is the current value for the associated Attribute. If the Attribute does not exist, it will return <code>nil</code>. If you use these methods before starting Optimizely, they will return the last value you provided through the corresponding <code>setValue:forAttributeId:</code> or <code>setValue:forAttributeApiName:</code> call. But <code>getValueForAttributeId:</code> will not be able to return the value for an Attribute whose value you have attempted to set through <code>setValue:forAttributeApiName:</code>. Likewise, <code>getValueForAttributeApiName:</code> will not be able to return the value for an Attribute whose value you have attempted to set through <code>setValue:forAttributeId:</code>.</p>
<p>To get an Array of all the current Attributes, use</p>
<pre><code class="lang-obj-c">NSArray *attributes = [Optimizely getAttributes];
</code></pre>
<p>This method returns a copy of all attributes that are defined in the data file. If this is called before Optimizely starts, it will return an empty array. If there are no attributes, it will return an empty array. Each attribute will be an index in the NSArray represented by an instance of the <code>OptimizelyAttribute</code> class.</p>
<h3 id="custom-tags">Custom Tags</h3>
<p>Custom Tags allow you to target users based on variables and attributes. You will be able to run your experiment and target visitors based on those custom attributes, effectively <strong>only</strong> bucketing those who meet your targeting conditions.  To be able to use Custom Tags in Optimizely, there are some lines of code that need to be added to your app.</p>
<p>For example, to create the Custom Tag &quot;returning_customer&quot; with a value of &quot;true&quot;:</p>
<pre><code class="lang-obj-c">[Optimizely setValue:@&quot;true&quot; forCustomTag:@&quot;returning_customer&quot;];
[Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<p><em><code>setValue</code> will only handle NSString objects.</em></p>
<p><code>setValue:forCustomTag:</code> should be called prior to <code>startOptimizely</code> and any time custom tag values are expected to change.  To do that you can make the <code>setValue:forCustomTag:</code> call in the following ways:</p>
<ul>
<li>Prior to <code>startOptimizely</code> so that Optimizely knows all of the targeting conditions prior to experiment activation</li>
<li><p><code>setValue:forCustomTag:</code> can also be called in conjunction with <a href="/ios/help/html/Classes/Optimizely.html#//api/name/refreshExperiments">refreshExperiments</a> while the app is still running.  For more details on how this works, you can refer to the section <a href="#experiment-reload">below</a>.</p>
<pre><code class="lang-obj-c">[Optimizely setValue:@&quot;true&quot; forCustomTag:@&quot;returning_customer&quot;];
[Optimizely refreshExperiments];
</code></pre>
</li>
</ul>
<p>From there, to create an experiment <a href="https://help.optimizely.com/hc/en-us/articles/202296994-Get-Started-on-Mobile-Optimization#targeting">targeting a Custom Tag</a>, open the Optimizely editor, click on &quot;Options,&quot; followed by &quot;Targeting&quot; and selecting &quot;Custom Tag&quot; within the Optimizely editor.</p>
<h3 id="experiment-reload">Experiment Reload</h3>
<p><a href="/ios/help/html/Classes/Optimizely.html#//api/name/refreshExperiments">refreshExperiments</a> should be called any time custom tag values are expected to change.  <a href="/ios/help/html/Classes/Optimizely.html#//api/name/refreshExperiments">refreshExperiments</a> allows Optimizely to take into account a user&#39;s newly added or changed custom tag values and re-buckets users based on updated targeting.</p>
<p>For example, here&#39;s a use case where the user logs in, the developer sets a logged in custom tag, and then calls <a href="/ios/help/html/Classes/Optimizely.html#//api/name/refreshExperiments">refreshExperiments</a>:</p>
<pre><code class="lang-obj-c">- (void)handlerForUserLogin {
      // The user just logged in and we can set a custom tag to track this
      // and then we&#39;ll call a refresh
      [Optimizely setValue:@&quot;logged_in&quot; forCustomTag:@&quot;customer_state&quot;];
      [Optimizely refreshExperiments];
}
</code></pre>
<p><em>Note: <a href="#manual-activation">Manually activated</a> experiments will need to be re-activated after refreshExperments for the new audience conditions to take effect.</em></p>
<h3 id="optimizely-end-user-id">Optimizely End User Id</h3>
<p>This is a unique identifier generated by the Optimizely SDK for each end user of the app. Unlike the Universal User Id, this is a readonly property. If no Universal User Id is set, the Optimizely End User Id will be used for bucketing. All events sent from the SDK will contain the Optimizely End User Id. You can read the value for the Optimizely End User Id by calling</p>
<pre><code class="lang-obj-c">[Optimizely sharedInstance].optimizelyEndUserId;
</code></pre>
<h3 id="universal-user-id-beta-">Universal User ID (Beta)</h3>
<p>Set a unique (logged-in) identifier to be used by Optimizely for bucketing and tracking. Once set, Optimizely will bucket visitors in all new and future experiments so that visitors will see the same variation across devices (e.g. iPad app to iPhone app). Note that bucketing only happens upon app foregrounding, cold start, or manual activation. We will store this identifier in <code>NSUserDefaults</code> and continue to use it until a new one is set.</p>
<p>Optimizely will also track unique visitors in experiment results using this ID; we will count an anonymous ID and a Universal ID as two distinct visitors, and prefer the Universal ID when counting experiment traffic and goals. UUID will not rebucket users who have seen a certain experiment already. <em>Regardless, make sure to target your experiments to &quot;Has Universal User ID&quot; to ensure consistent counting and bucketing across devices.</em></p>
<pre><code class="lang-obj-c">[Optimizely sharedInstance].universalUserId = @&quot;universalUserid&quot;;
</code></pre>
<p>Always set UUID before your experiment gets activated. For automatic experiments, this means setting UUID before you call start Optimizely. For manual experiments, this means setting UUID before you call activateManualExperiment.</p>
<p><em>This is a beta feature, and is subject to change.</em> To learn more, visit our <a href="https://help.optimizely.com/hc/en-us/articles/203626830">Help Center</a>, or consult our <a href="/ios/help/html/Classes/Optimizely.html#//api/name/userId">API reference</a>. For support, please visit <a href="http://www.optiverse.com/">Optiverse</a> or contact your Customer Success Manager.</p>
<div class="attention attention--warning push--bottom">Note: By using this API call, you agree not to pass personally identifiable (PII) information to Optimizely in accordance with our <a href="http://optimizely.com/terms">Terms of Service</a> or your Master Service Agreement. If your login identifier is personally identifiable (such as an email address) you must hash it first before sending to Optimizely.</div>

<h2 id="goal-tracking">Goal Tracking</h2>
<p>For additional information about any of the experimental approaches below, see the full <a href="/ios/help/html/index.html">API Documentation</a>.</p>
<h3 id="track-event">Track Event</h3>
<p>Custom goals allow you to track events other than taps and view changes. There are two steps to creating a custom goal.</p>
<ol>
<li><p>In order to track a custom goal, choose a unique string to identify it and send this string as a parameter to:</p>
<pre><code class="lang-obj-c">   [Optimizely trackEvent:(NSString *)];
</code></pre>
</li>
<li><p>To create an experiment that tracks that custom goal, open the Optimizely editor, click &quot;Goals,&quot; then &quot;Create a New Goal,&quot; and select &quot;Custom Goal&quot; from the drop-down. You will be prompted for a string to uniquely identify your custom goal.  You should enter in the same string used in your trackEvent method call in the previous step.</p>
</li>
</ol>
<p>For example, if we wanted a goal for users deleting a task with a swipe, we might create a custom goal &quot;User Deleted Task&quot; and then call <a href="/ios/help/html/Classes/Optimizely.html#//api/name/trackEvent:">trackEvent</a> with this string in our event handler as follows:</p>
<pre><code>  ```obj-c
  - (void)userDidSwipeTask:(id)sender {
      [Optimizely trackEvent:@&quot;User Deleted Task&quot;];
      //The rest of your handler
  }
  ```
</code></pre><p>As of SDK version 1.1, if you aren&#39;t sure of the exact spelling of your custom goal string, you can trigger custom events in your simulator or connected device, and the strings will appear in the dialog in the order they were triggered.</p>
<p>For more details and to learn about tap and view goals, refer to the following <a href="https://help.optimizely.com/Track_Conversion_Goals/Mobile_Goals%3A_Measure_the_success_of_your_experiment">guide</a> from our Knowledge Base.</p>
<h3 id="revenue-tracking">Revenue Tracking</h3>
<p>The revenue goal allows you to <a href="/ios/help/html/Classes/Optimizely.html#//api/name/trackRevenue:">track revenue</a> in your app. There are two steps to creating a custom goal.</p>
<ol>
<li><p>Add the tracking code to your app, you can add this tracking call by adding the code below:</p>
<pre><code class="lang-obj-c">   [Optimizely trackRevenue:(int)];
</code></pre>
<p>   For example, if we wanted a goal for users that completed a purchase, and you could make the tracking call in your purchaseConfirmation method where <code>price</code> is the variable that holds the dollar amount that has been spent:</p>
<pre><code class="lang-obj-c">   - (void)purchaseConfirmation:(id)sender {
       [Optimizely trackRevenue:price*100];
       //The rest of your handler
   }
</code></pre>
</li>
<li><p>To create an experiment that tracks revenue, click Goals -&gt; Add a Saved Goal -&gt; Hover over the &quot;Total Revenue&quot; goal and click the &quot;Add&quot; button.</p>
</li>
</ol>
<h2 id="analytics-integrations">Analytics Integrations</h2>
<p>Optimizely integrates with popular analytics frameworks to allow you to slice and dice your experiment results. The integration sends information about the experiment and variation a user is bucketed into.  Currently we support the following frameworks in our iOS SDK:</p>
<ul>
<li><a href="https://help.optimizely.com/hc/en-us/articles/209645787">Localytics</a></li>
<li><a href="https://help.optimizely.com/hc/en-us/articles/204963198">Amplitude</a></li>
<li><a href="/ios/help/html/Classes/Optimizely.html#//api/name/activateMixpanelIntegration">Mixpanel</a></li>
<li><a href="https://help.optimizely.com/hc/en-us/articles/204628347">Google Analytics</a></li>
</ul>
<p><em>Note: You must instantiate your analytics SDK in <code>application:didFinishLaunchingWithOptions:</code> before calling <code>startOptimizelyWithAPIToken</code> and enabling any integrations.</em></p>
<h3 id="custom-integration">Custom Integration</h3>
<p>You can also access experiments and variations that a user has visited directly using the <code>[Optimizely sharedInstance].visitedExperiments</code> property and pass that data to internal or other analytics frameworks.  You can pass the values of <code>[Optimizely sharedInstance].visitedExperiments.experimentName</code> and <code>[Optimizely sharedInstance].visitedExperiments.variationName</code> to your analytics tool.  You can learn more about the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/allExperiments">allExperiments</a> and <a href="/ios/help/html/Classes/Optimizely.html#//api/name/visitedExperiments">visitedExperiments</a> properties via our API reference.</p>
<p>The recommended time to access data from the <code>[Optimizely sharedInstance].visitedExperiments</code> property is when the <code>OptimizelyExperimentVisitedNotification</code> is triggered.  For more details on the <code>OptimizelyExperimentVisitedNotification</code>, you can refer <a href="/ios/reference/index.html#subscribe-to-nsnotifications">here</a>.</p>
<h2 id="network-settings">Network Settings</h2>
<p>There are only two instances when the Optimizely iOS SDK uses a network connection: when downloading the config file (which contains all experiment configuration information) and when returning event tracking data.  By default, network calls are automatically made every 2 minutes.  The Optimizely iOS SDK allows you to customize how often these network calls are made by:</p>
<ol>
<li>Customizing the 2 minute interval</li>
<li>By turning off automatic sending of events and allowing you to sending events manually.</li>
</ol>
<p>The first option is to customize the interval for how often you want network calls to be made. To adjust the interval in seconds, you can use the <a href="/ios/help/html/Classes/Optimizely.html#//api/name/dispatchInterval">dispatchInterval</a> method, which should be called prior to <code>startOptimizely</code> at the beginning of your <code>application:didFinishLaunchingWithOptions:</code> method:</p>
<pre><code class="lang-obj-c">    // Configure a network call to be made every minute
    [Optimizely sharedInstance].dispatchInterval = 60;

    [Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<p>The second option is to turn off the interval and manually make network calls.  Setting <code>dispatchInterval</code> to 0 or a negative value will disable the automatic sending of events. You will need to send events manually using <a href="/ios/help/html/Classes/Optimizely.html#//api/name/dispatch">dispatch</a>, which is also when the config file will be downloaded.</p>
<p>To turn off the automatic sending of events, you can set the value of <a href="/ios/help/html/Classes/Optimizely.html#//api/name/dispatchInterval">dispatchInterval</a> to 0 at the beginning of your <code>application:didFinishLaunchingWithOptions:</code> method:</p>
<pre><code class="lang-obj-c">
#ifdef DEBUG
    [Optimizely enableEditor];
#endif

    // Configure a network call to be made every minute
    [Optimizely sharedInstance].dispatchInterval = 0;

    [Optimizely sharedInstance].shouldReloadExperimentsOnForegrounding = YES;
    [Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<p>To manually send events, in the appropriate function (e.g. where you make other network calls or after a custom event goal is triggered):</p>
<pre><code class="lang-obj-c">- (void)userDidSwipeTask:(id)sender {
    [Optimizely trackEvent:@&quot;User Deleted Task&quot;];

    // Dispatch events to the network
    [Optimizely dispatch];

    //The rest of your handler
}
</code></pre>
<h2 id="manual-activation">Manual Activation</h2>
<h3 id="experiment-activation-modes">Experiment Activation Modes</h3>
<p>There are two different types of activation modes for Optimizely Mobile experiments.</p>
<h4 id="automatic-default-">Automatic (Default)</h4>
<p>By default, Optimizely buckets users and activates the experiment as soon as the app starts and the startOptimizely method is called (either synchronously or asynchronously). Experiments are marked as visited when the end user reaches an element that has been modified in the experiment.</p>
<h4 id="manual">Manual</h4>
<p>In manual activation mode, developers can specify, via an in-app API call, at which point they want to activate a given experiment. Manual activation allows you to separate the experiment start (which buckets the users and activates the experiment) from startOptimizely, which loads the datafile and any remote assets, such as images. Manual activation is only available for SDK versions 1.3.0 and above.</p>
<p><em>Please note that visitors still must meet Audience targeting conditions for a manually activated experiment to be eligible for that experiment.</em> Manual activation does not bypass Audience conditions.</p>
<p>Toggle between manual and automatic activation mode from the Options &gt; Activation Mode menu in the Editor:</p>
<p><img src="/assets/img/ios/activation_mode.png" alt="Drawing" style="width: 50%;"/></p>
<h3 id="use-cases">Use Cases</h3>
<h4 id="use-case-1-set-additional-metadata-for-your-audiences-before-evaluating-targeting-conditions-for-an-unactivated-experiment-">Use case #1: Set additional metadata for your audiences before evaluating targeting conditions for an unactivated experiment.</h4>
<p>Bucketing only occurs for your audiences when activateExperiment is called and NOT when startOptimizely is called, and thus any custom tags you set before the experiment starts will be considered for targeting.
For example, you can mark a user as a “VIP” at one point during a session, then use this tag for an experiment later in the same session.
With automatic activation mode, you can only target using tags set before the app was started (and thus set in a previous session).</p>
<h4 id="use-case-2-bucket-only-a-subset-of-users-who-access-less-frequently-used-areas-of-your-app-">Use case #2: Bucket only a subset of users who access less frequently used areas of your app.</h4>
<p>Bucketing users when the app loads, which is done in automatic mode, may not be the best choice for experiments involving an experience that not all users visit.
For example, if you want to test a feature deep in your user experience that only 10% of users visit, you wouldn’t necessarily want to bucket all users when you launch your app (as is done with automatic mode), because this could lead to skewed sampling.
If you manually activate your experiment only when users reach that experience, you can bucket users at the point where they visit that feature, and run tests on only those users.</p>
<h4 id="use-case-3-quick-load-assets-for-consistency-">Use case #3: Quick-load assets for consistency.</h4>
<p>Remote assets distributed by the Optimizely CDN, such as images you upload to our editor, start loading asynchronously when the app starts. As a result, if any assets fail to load before an experiment is viewed due to slow internet speeds, the user is not showed the variation and is instead shown the control even though that user has been bucketed.
The variation will be shown to the user the next time he or she opens the app, assuming the assets have loaded before he or she views the experiment, leading to an inconsistent user experience and possibly even skewed results.
In manual activation mode, you can activate experiments right when you want to show them, giving the user’s device more time to load assets associated with that experiment.</p>
<h3 id="manual-activation-example">Manual Activation Example</h3>
<pre><code class="lang-obj-c">// Calling start Optimizely will not activate any manual experiments.
// Instead you have to activate them manually for users to see your experiment
[Optimizely startOptimizelyWithAPIToken:myOptimizelyAPIKey
                          launchOptions:launchOptions];

...

// You specify when you want to activate each manual experiment.
// For use case #1 above, this can be useful if you want to wait until you
// have additional data for a user and then store that data as custom tags.
// For example, we now know that the user is a VIP user so we set a tag for that
[Optimizely setValue:@&quot;VIP&quot; forCustomTag:@&quot;accountType&quot;];

// Activate a manual experiment that takes the custom tag we just set into account
BOOL success = [Optimizely activateManualExperiment:myExperimentId];
</code></pre>
<h2 id="debugging-your-experiments">Debugging Your Experiments</h2>
<p>For full details on how to use NSNotifications and the Experiment Data Object, you can refer to this <a href="https://help.optimizely.com/hc/en-us/articles/205156117-QA-Your-Optimizely-iOS-Experiments">QA article</a> in Optiverse.</p>
<h3 id="subscribe-to-nsnotifications">Subscribe to NSNotifications</h3>
<p>Optimizely provides a couple NSNotificationCenter notifications for developers to observe.  Some use cases for implementing a notification include debugging and a way to interact with your other analytics tools.</p>
<p><code>OptimizelyStartedNotification</code> is triggered when Optimizely has successfully completed startup.</p>
<p><code>OptimizelyFailedToStartNotification</code> is triggered when Optimizely has failed to complete startup.</p>
<p><code>OptimizelyExperimentVisitedNotification</code> is triggered when an experiment is viewed by the user. The userInfo in the notification will have metadata which includes experiment Id, variation Id, experiment description and variation description for the experiment that was visited.</p>
<p><code>OptimizelyGoalTriggeredNotification</code> is triggered when an Optimizely goal is tracked and a conversion is counted. The user info in the notification will list the experiment IDs for which this was counted as a conversion.</p>
<p><code>OptimizelyNewDataFileLoadedNotification</code> is triggered when an application resumes from foregrounding and a new experiment datafile is applied. This notification only triggers in Normal Mode, and not in Edit Mode.</p>
<p>The following sample shows how to register for a notification:</p>
<pre><code class="lang-obj-c">-(void)registerForOptimizelyNotifications {
    [[NSNotificationCenter defaultCenter] addObserver:self
        selector:@selector(experimentDidGetViewed:)
            name:OptimizelyExperimentVisitedNotification object:nil];
}
</code></pre>
<h3 id="experiment-data-object">Experiment Data Object</h3>
<p>Optimizely&#39;s Experiment Object will provide information about what part of the experiment life cycle a user is part of.  There are two main objects: <code>allExperiments</code> and <code>visitedExperiments</code>.  <code>allExperiments</code> contains all running, paused, and draft experiments in your Optimizely project.  <code>visitedExperiments</code> contains all experiments in your Optimizely project that a user has actually visited. You can also query for the <code>OptimizelyExperimentData</code> associated to a given experimentId by using <code>getExperimentDataById:</code>.</p>
<p>Each experiment is represented as an <code>OptimizelyExperimentData</code> object. For more info on the properties contained there, see the class reference for <a href="/ios/help/html/Classes/OptimizelyExperimentData.html">OptimizelyExperimentData</a>.</p>
<p>Sample usage of how this data looks is listed below:</p>
<pre><code class="lang-obj-c">for (OptimizelyExperimentData *data in [Optimizely sharedInstance].allExperiments) {
    // Lists all running, paused, and draft experiments
    NSLog(@&quot;All Experiments: %@, %@, %u, visitedEver: %s, visitedCount: %ld&quot;, data.experimentName, data.variationName, data.state, data.visitedEver ? &quot;true&quot; : &quot;false&quot;, (unsigned long) data.visitedCount);
}

for (OptimizelyExperimentData *data in [Optimizely sharedInstance].visitedExperiments) {
    // Lists all experiments that a user has visited
    NSLog(@&quot;Visited Experiments: %@, %@, %u, visitedEver: %s, visitedCount: %ld&quot;, data.experimentName, data.variationName, data.state, data.visitedEver ? &quot;true&quot; : &quot;false&quot;, (unsigned long)data.visitedCount);
}

// This will get the experiment with the corresponding experimentId
OptimizelyExperimentData *data = [Optimizely getExperimentDataById:@&quot;EXPERIMENT_ID&quot;];
</code></pre>
<h3 id="audience-information">Audience Information</h3>
<p>There are a couple utility functions that you can use to help aid in debugging audiences. <code>getAudiences</code> will return an array of all the audiences associated with your project. Each audience is represented as an NSDictionary and you&#39;ll be able extract additional metadata through the following keys: <code>audience_id</code>, <code>conditions</code>, and <code>name</code>. From there you can check whether or not the user currently satisfy a given audience by calling <code>isUserInAudience:</code> with a specific audienceId. Keep in mind that both of these methods need to be called after Optimizely is started.</p>
<p>Here&#39;s an example below:</p>
<pre><code class="lang-obj-c">// Make sure to call the helper functions after starting Optimizely
[Optimizely startOptimizelyWithAPIToken:myOptimizelyAPIKey
                          launchOptions:launchOptions];

// Gets an array that holds all your project audiences
NSArray *audiences = [Optimizely getAudiences];

for (NSDictionary *audience in audiences) {
    // You can access the metadata associated with each audience
    // Here we&#39;re just getting each audience&#39;s audienceId
    NSString *audienceId = audience[@&quot;audience_id&quot;];

    // We can then check to see if the user currently satisfies those
    // audience conditions
    BOOL included = [Optimizely isUserInAudience:audienceId];
    NSLog(@&quot;The user %@ included in audience: %@&quot;, included ? @&quot;is&quot; : @&quot;isn&#39;t&quot;, audienceId);
}
</code></pre>
<h3 id="forcing-a-variation">Forcing a Variation</h3>
<p>Sometimes you&#39;ll want to try out your experiment before it goes live and outside of preview mode. You may spend a lot of time re-bucketing yourself in order to get into all the experiment combinations. Now you can opt to force an experiment into a given variation with <code>forceVariation:ofExperiment:</code>. <em>You must force the variation before calling start Optimizely.</em></p>
<p>When you force a variation for a given experiment, we&#39;ll reset the app&#39;s userId and try to force that experiment/variation if they are both valid. This should be called before startOptimizely is called and keep in mind that you should only use this for testing your experiments. You should NOT ship this to your customers.</p>
<p>Here&#39;s an example below:</p>
<pre><code class="lang-obj-c">// Force the variation and experiment specified by those two ids
[Optimizely forceVariation:myVariationId ofExperiment:myExperimentId];

// Make sure to call it before start Optimizely is called
[Optimizely startOptimizelyWithAPIToken:myOptimizelyAPIKey
                          launchOptions:launchOptions];
</code></pre>
<p>To find a variation&#39;s ID, head to the experiment editor and click on the &quot;Variation Settings&quot; button on the black bar on the far left-hand side of the window.</p>
<p><strong>Note your experiment must not be paused for forceVariation to take effect.</strong></p>
<h3 id="programmatically-enable-preview-mode">Programmatically Enable Preview Mode</h3>
<p>While preview mode can be enabled from the dashboard it can also be enabled from code.  This allows you to preview variations across all of your experiments without needing to connect to the editor.  Preview mode has UI that allows you easily switch variations and view event logs.</p>
<pre><code class="lang-obj-c">[Optimizely enablePreview];
[Optimizely startOptimizelyWithAPIToken:YOUR_API_TOKEN launchOptions:launchOptions];
</code></pre>
<h3 id="resetting-qa-state">Resetting QA State</h3>
<p>Uninstalling the app everytime to QA your builds with Optimizely can be quite tedious. Now you can use <code>resetUserBucketing</code> to clear any variations that the current app user may have already been bucketed into. This will also remove the cached data file. This is useful if you want to insure that you&#39;re treated as a new user each time you start the app. Keep in mind that you must call <code>resetUserBucketing</code> before you start Optimizely.</p>
<p>Here&#39;s an example below:</p>
<pre><code class="lang-obj-c">// Reset user bucketing
[Optimizely resetUserBucketing];

// Make sure to call it before start Optimizely is called
[Optimizely startOptimizelyWithAPIToken:myOptimizelyAPIKey
                          launchOptions:launchOptions];
</code></pre>
<h3 id="verbose-logging">Verbose Logging</h3>
<p>Enabling verbose logging allows you to view detailed log output. This will provide more information about experiments and its goals, your Live Variables, Code Blocks, and more.</p>
<pre><code class="lang-obj-c">// Enable verbose logging
[Optimizely sharedInstance].verboseLogging = YES;

// Make sure to call it before start Optimizely is called
[Optimizely startOptimizelyWithAPIToken:myOptimizelyAPIKey
                          launchOptions:launchOptions];
</code></pre>
<h2 id="upgrading-to-a-new-sdk">Upgrading to a new SDK</h2>
<p>To keep up with SDK updates, you can refer to our <a href="https://github.com/optimizely/Optimizely-iOS-SDK/blob/master/CHANGELOG.md">change log</a>.</p>
<h4 id="using-cocoapods">Using CocoaPods</h4>
<p>Simply run <code>pod update</code>.</p>
<h4 id="manual-installation-upgrade">Manual Installation Upgrade</h4>
<p>Repeat steps 1 and 2 <a href="/ios/getting-started/index.html#manual-installation">here</a>. You may need to remove Optimizely.framework from your Frameworks directory before you drag in the new copy.</p>
<!--
#### SDK Specific Upgrade Instructions (for upgrading to SDK 0.8)
0. [![SDK Version](http://img.shields.io/cocoapods/v/Optimizely-iOS-SDK.svg?style=flat)](https://github.com/optimizely/Optimizely-iOS-SDK/releases/) For manual upgrades, please follow steps 1 and 2 [here](/ios/getting-started/index.html#manual-installation).

1. Remove the run script build phase (prior to version 0.8).
  Click on your project and for any target that was using Optimizely, select
  the run script build phase for `OptimizelyPrepareNibs.rb` and click the little
  'x' on the right hand side of the build phase.

2. If you haven't already, be sure to implement the [URL scheme](#urlscheme).
-->
<h2 id="uninstalling-optimizely">Uninstalling Optimizely</h2>
<p>There are two steps to uninstalling Optimizely.</p>
<ol>
<li><p><strong>Remove the SDK from your app.</strong>
If you installed via CocoaPods, simply remove the dependency on Optimizely
and run <code>pod install</code> again. If you installed manually, you need to delete
Optimizely.framework from your app. Whether or not you actually delete the
framework or just remove the reference, it wont be compiled into your app any longer.</p>
</li>
<li><p><strong>Remove the run script build phase (prior to version 0.8).</strong>
Click on your project and for any target that was using Optimizely, select
the run script build phase for <code>OptimizelyPrepareNibs.rb</code> and click the little
&#39;x&#39; on the right hand side of the build phase.</p>
</li>
</ol>

    </div>
  </main>

  <footer class="footer cf soft--ends soft-double--sides">
    <div class="float--left">
      <a href="https://www.optimizely.com">
        <img class="display--inline-block vertical-align--bottom" src="/assets/img/optimizely_logo_footer.svg">
      </a>
      <span class="soft--left">&copy; 2016 Optimizely</span>
      <a class="soft--left is-hidden-on-mobile" href="https://www.optimizely.com/terms/">Terms of Service</a>
      <a class="soft--left" href="https://www.optimizely.com/privacy/">Privacy Policy</a>
    </div>
    <div class="float--right is-hidden-on-mobile" style="margin-top: 2px;">
       <a class="soft--left" href="https://www.optimizely.com/">Optimizely.com</a>
       <a class="soft--left" href="https://blog.optimizely.com/">Blog</a>
       <a class="soft--left" href="https://help.optimizely.com/">Help</a>
       <a class="soft--left" href="https://community.optimizely.com/">Community</a>
       <a class="soft--left" href="https://www.optimizely.com/jobs/">Jobs</a>
    </div>
  </footer>


    <!-- JQUERY -->
    <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-13208639-14', 'optimizely.com');
      ga('send', 'pageview');
    </script>

    
  </body>
</html>

