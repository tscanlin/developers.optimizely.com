<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Optimizely Developers</title>
    <meta charset="UTF-8">
    <meta name="description" content="Optimizely Developer Documentation">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="stylesheet" href="/assets/css/style.css">
    <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Source+Code+Pro:400,700' rel='stylesheet' type='text/css'>

    <!-- This should be the first script to make sure redirects work quickly. -->
    <script src="/assets/js/bundle.js" type="text/javascript"></script>

    <!-- Demandbase -->
    <script>
      (function(d,b,a,s,e) {
        var t = b.createElement(a), fs = b.getElementsByTagName(a)[0];
        t.async=1; t.id=e; t.src=('https:'==document.location.protocol ? 'https://' : 'http://') + s;
        fs.parentNode.insertBefore(t, fs);
      })(window,document,'script','scripts.demandbase.com/q8GATaKQ.min.js','demandbase_js_lib');
    </script>

    <!-- Heap Analytics -->
    <script type="text/javascript">
      if (document.location.hostname != "localhost") {
        window.heap=window.heap||[],heap.load=function(e,t){window.heap.appid=e,window.heap.config=t=t||{};var r=t.forceSSL||"https:"===document.location.protocol,a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src=(r?"https:":"http:")+"//cdn.heapanalytics.com/js/heap-"+e+".js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(a,n);for(var o=function(e){return function(){heap.push([e].concat(Array.prototype.slice.call(arguments,0)))}},p=["addEventProperties","addUserProperties","clearEventProperties","identify","removeEventProperty","setEventProperties","track","unsetEventProperty"],c=0;c<p.length;c++)heap[p[c]]=o(p[c])};
        heap.load("411455962");
      }
    </script>

    <!-- Optimizely -->
    <script src="//cdn.optimizely.com/js/6663270427.js"></script>
  </head>
  <body class="javascript code-samples">
    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <!-- <symbol id="add" viewBox="-590 386 16 16">
      <path d="M-575 395v-2h-6v-6h-2v6h-6v2h6v6h2v-6z"/>
    </symbol>
    <symbol id="align-center" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM24 14H8c-1.1 0-2-.9-2-2s.9-2 2-2h16c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM24 30H8c-1.1 0-2-.9-2-2s.9-2 2-2h16c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-justify" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 14H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 30H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-left" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM18 14H4c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM18 30H4c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="align-right" viewBox="0 0 32 32">
      <g><path d="M28 6H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 14H14c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2zM28 22H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 30H14c-1.1 0-2-.9-2-2s.9-2 2-2h14c1.1 0 2 .9 2 2s-.9 2-2 2z"/></g>
    </symbol>
    <symbol id="archive" viewBox="0 0 32 32">
      <g><path d="M30 4c0-1.3-.6-2-2-2H4c-1.3 0-2 .6-2 2v4h28V4zM4 10v18c0 1.3.6 2 2 2h20c1.3 0 2.1-.6 2.1-2V10H4z"/><path fill="#fff" d="M18 18v-8h-4v8H8l8 8 8-8z"/></g>
    </symbol>
    <symbol id="arrow-left" viewBox="-463 265 32 32">
      <path d="M-454.8 281l11.3 11.3 4.3-4.2-7.1-7.1 7.1-7.1-4.3-4.2z"/>
    </symbol>
    <symbol id="arrow-right" viewBox="-463 265 32 32">
      <path d="M-439.2 281l-11.3-11.3-4.3 4.2 7.1 7.1-7.1 7.1 4.3 4.2z"/>
    </symbol>
    <symbol id="audiences" viewBox="0 0 32 32">
      <g><path d="M11.5 11.4c0 1.9 1.2 3.6 2.8 4.3.6.2 1.2.4 1.8.4 2.6 0 4.7-2.1 4.7-4.7 0-1.9-1.2-3.6-2.8-4.3-.6-.2-1.2-.4-1.8-.4-2.6.1-4.7 2.1-4.7 4.7zM22.8 11.1c.4.1.7.1 1.1.1 2.6 0 4.7-2.1 4.7-4.7s-2.1-4.7-4.7-4.7c-2.2 0-4.1 1.6-4.5 3.6 2 1.3 3.3 3.3 3.4 5.7zM14.2 16C10.9 16 8 20.4 8 23.7V28.6l.3.1c3.1 1 3.8 1.2 7.6 1.2 4.4 0 7.6-1.5 7.7-1.6l.4-.3v-4.4c0-2.9-1.9-6.4-4.6-7.2-.4-.1-.8-.4-1.2-.4h-4zM8 11.3c.5 0 1-.1 1.5-.3.1-2.2 1.3-4.1 3.1-5.2-.4-2.2-2.3-3.9-4.6-3.9-2.6 0-4.6 2.1-4.6 4.7s2 4.7 4.6 4.7zM6 23.7c0-3.1 2-6.5 4.8-8.1C10 14.5 9.6 13 9.5 12H6c-3.3 0-6 2.3-6 5.6v6.3l.3.1c2.1.7 3.6 1 5.6 1.2v-1.5zM25.9 12h-3.1c0 1-.5 2.5-1.3 3.6.9.5 1.7 1.1 2.4 2.1 1.3 1.7 2.1 3.8 2.1 5.9V25c3.4-.2 5.4-.9 5.6-1h.4v-6.4c0-3.3-2.8-5.6-6.1-5.6z"/></g>
    </symbol>
    <symbol id="calendar" viewBox="0 0 32 32">
      <path d="M22 2V0h-4v2h-6V0H8v2H0v30h30V2h-8zM10 28H4v-6h6v6zm0-8H4v-6h6v6zm8 8h-6v-6h6v6zm0-8h-6v-6h6v6zm0-8H4V6h14v6zm8 16h-6v-6h6v6zm0-8h-6v-6h6v6zm0-8h-6V6h6v6z"/>
    </symbol>
    <symbol id="check" viewBox="-595 381 32 32">
      <path d="M-564.2 389l-4.3-4.3-15.2 15.2-6.1-6.1-4.2 4.3 10.3 10.3"/>
    </symbol> -->
    <symbol id="clipboard" viewBox="0 0 32 32">
      <g><path d="M10 12h12v4H10zM10 20h12v4H10zM18 2V0h-4v2H2v30h28V2H18zm8 26H6V6h4v2h12V6h4v22z"/></g>
    </symbol>
    <!-- <symbol id="close" viewBox="-289 381 32 32">
      <path d="M-261.7 389.8l-4.2-4.2-7.1 7.1-7.1-7.1-4.2 4.2 7.1 7.1-7.1 7.1 4.2 4.2 7.1-7.1 7.1 7.1 4.2-4.2-7.1-7.1z"/>
    </symbol>
    <symbol id="code" viewBox="0 0 32 32">
      <g><path d="M8 25.4c-.4 0-.8-.2-1.1-.5L.3 17c-.4-.5-.4-1.3 0-1.8l6.2-7.9c.5-.7 1.5-.9 2.1-.4.6.5.7 1.4.3 2L3.3 16l5.8 7c.5.6.4 1.5-.2 2-.3.2-.6.4-.9.4zM24 25.4c-.3 0-.7-.1-.9-.3-.6-.5-.7-1.4-.2-2l5.7-7.1-5.5-7c-.5-.6-.4-1.5.3-2 .6-.5 1.5-.4 2 .3l6.1 7.9c.4.5.4 1.3 0 1.8L25 24.9c-.2.3-.6.5-1 .5zM13.7 27.8c-.1 0-.2 0-.3-.1-.7-.2-1.2-.9-1.1-1.7l4.9-20.8c.2-.7 1-1.2 1.8-1 .7.2 1.2.9 1.1 1.7l-4.9 20.8c-.3.7-.9 1.1-1.5 1.1z"/></g>
    </symbol>
    <symbol id="collaborators" viewBox="0 0 32 32">
      <g><circle cx="9" cy="7" r="5"/><circle cx="23" cy="7" r="5"/><path d="M32 32v-.2L28 16c0-1.1-.9-2-2-2h-6c-1.1 0-2 .9-2 2v16h14zM13.9 32l.1-.2V15.9c0-1.1-1-1.9-2.1-1.9h-6c-1.1 0-1.9.8-1.9 1.9L0 31.8l-.1.2h14z"/></g>
    </symbol>
    <symbol id="dimensions" viewBox="0 0 32 32">
      <g><path fill="#fff" d="M17 2L2 8l14.9 6L32 7.9 17 2z"/><path d="M16 30L2 24V10l14 6zM30 12.6v9.8l-10 4.9v-9.8l10-4.9m2-2.7l-14 6v14l14-6v-14z"/><path fill="#fff" d="M30 12.6v9.8l-10 4.9v-9.8l10-4.9"/><path stroke="#000" stroke-width="2" stroke-miterlimit="10" d="M30 8M4 8" fill="none"/><path d="M17 4.1L27.2 8l-10.3 4L6.7 8 17 4.1M17 2L2 8l14.9 6L32 7.9 17 2z"/></g>
    </symbol>
    <symbol id="duplicate" viewBox="0 0 32 32">
      <g><path d="M22 32H2c-1.1 0-2-.9-2-2V9.9c0-1.1.9-2 2-2h20c1.1 0 2 .9 2 2V30c0 1.1-.9 2-2 2zM30 0H10C8.9 0 8 .9 8 2v2h18c1.1 0 2 .8 2 1.9V24h2c1.1 0 2-.8 2-1.9V2c0-1.1-.9-2-2-2z"/><path fill="#fff" d="M18 18h-4v-4h-4v4H6v4h4v4h4v-4h4z"/></g>
    </symbol>
    <symbol id="editor-switch" viewBox="0 0 16 16">
      <path fill="#fff" d="M10.2 7.4v-2c0-1.7-1.4-3-3-3h-.6c-1.6 0-3 1.3-3 3v2c0 1.7 1.4 3 3 3h.6c1.6 0 3-1.3 3-3z"/><path d="M9.9 10.9h-6c-.5 0-.9-.4-.9-.9V2.8c0-.5.4-.9.9-.9h6c.5 0 .9.4.9.9v7.3c-.1.5-.5.8-.9.8zm-5.8-1h5.5V3H4.1v6.9z"/><path fill="#fff" d="M12.3 10.5v-2c0-1.7-1.3-3-3-3h-.6c-1.6 0-3 1.4-3 3v2c0 1.6 1.3 3 3 3h.6c1.6 0 3-1.3 3-3z"/><path d="M12 14.1H6c-.5 0-.9-.4-.9-.9V5.9c0-.5.4-.9.9-.9h6c.5 0 .9.4.9.9v7.3c-.1.5-.5.9-.9.9zM6.2 13h5.5V6.1H6.2V13zM15.2 6.6l-1-.3c.2-.7 0-1.3-.4-1.8-.5-.5-1.3-.6-2-.3l-.4-1c1.1-.5 2.3-.3 3.1.4.7.8 1 1.9.7 3zM13.7 5.3L13.6 8 16 6.8zM3.2 13c-.8 0-1.6-.3-2.2-1-1.1-1.2-1.3-3-.6-4.5l1 .5c-.6 1.1-.4 2.4.4 3.3.6.6 1.4.8 2.3.4l.4 1c-.5.2-.9.3-1.3.3zM1.8 8.9l.3-2.7-2.5 1z"/>
    </symbol>
    <symbol id="experiments" viewBox="0 0 32 32">
      <g><path d="M0 22v10h32V14l-10 6-12-4zM22 12.1l-12-4-10 6v-4L10 4l12 4 10-6.4V6z"/></g>
    </symbol>
    <symbol id="external" viewBox="-752 644.1 31 30.9">
      <g><path d="M-726 644.9c0-.2-.1-.4-.2-.6-.2-.2-.3-.2-.6-.2l-7.6.1c-.3 0-.6.2-.7.5-.1.2-.1.6.1.8l7.6 7.7c.2.2.5.2.8.1.3-.2.5-.4.5-.7l.1-7.7M-740.8 656.8l2.2 2.2 11.1-11.1-2.2-2.2-11.1 11.1"/><path d="M-731.2 658.1v8.8h-17.6v-17.6h8.8v-3.2h-12v24h24v-12z"/></g>
    </symbol>
    <symbol id="goal" viewBox="0 0 32 32">
      <g><path d="M2 .1C3 .1 4 1 4 2v30H0V2C0 1 .9.1 2 .1zM25 6.2c2.4 0 5.5-1.3 6.9-2.3v18.6c-1.4 1-4.6 2.3-6.9 2.3s-4.5-.7-5.9-1.7c-1.4-1-2.8-1.7-5.1-1.7-2.4 0-4.5 1.5-6 2.5V5.3c1.4-1 3.6-2.5 6-2.5s3.7.7 5.1 1.7 3.5 1.7 5.9 1.7z"/></g>
    </symbol>-->
    <symbol id="hamburger" viewBox="0 0 32 32">
      <path d="M28 8H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 18H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2zM28 28H4c-1.1 0-2-.9-2-2s.9-2 2-2h24c1.1 0 2 .9 2 2s-.9 2-2 2z"/>
    </symbol>
    <!--<symbol id="history" viewBox="0 0 32 32">
      <g><path d="M18 2C10.9 2 5.1 7.2 4.2 14H0l6 6 6-6H7.2c.9-5.1 5.4-9 10.8-9 6.1 0 11 4.9 11 11s-4.9 11-11 11c-4 0-7.6-2.2-9.5-5.5l-2.2 2.2C8.8 27.5 13.1 30 18 30c7.7 0 14-6.3 14-14S25.7 2 18 2zM16 8h4v8h-4zM20.9 23.9L24 22l-4-6h-4z"/></g>
    </symbol>
    <symbol id="inconclusive" viewBox="0 0 32 32">
      <circle fill="#fff" cx="16" cy="15.9" r="15.9"/><path d="M16 3c7.1 0 12.9 5.8 12.9 12.9s-5.8 13-12.9 13-13-5.8-13-13S8.8 3 16 3m0-3C7.2 0 0 7.1 0 15.9s7.2 16 16 16S31.9 24.8 31.9 16 24.8 0 16 0zM14 6h4v12h-4zM14 14h10v4H14z"/>
    </symbol>
    <symbol id="integrations" viewBox="0 0 32 32">
      <g><path d="M25.5 9.3c.1.4.2.8.2 1.2.1.8 0 1.8-.1 2.5 2.1 1.7 3.4 4.2 3.4 7 0 5-4 9-9 9s-9-4-9-9c0-4.6 3.4-8.3 7.8-8.9 0-.4-.1-1.1-.4-1.9-.2-.4-.3-.8-.5-1C12.3 9.2 8 14.1 8 20c0 6.6 5.4 12 12 12s12-5.4 12-12c0-4.6-2.6-8.7-6.5-10.7zM12 0C5.4 0 0 5.4 0 12c0 4.4 2.4 8.3 6 10.4-.1-.8-.2-1.6-.2-2 0-.4.1-1.2.2-1.7C4.1 17 3 14.6 3 12c0-5 4-9 9-9s9 4 9 9c0 4.5-3.3 8.3-7.7 8.9 0 .5 0 .9.3 1.5.3.7.4 1 .7 1.3 5.5-1.1 9.6-6 9.6-11.8C24 5.4 18.6 0 12 0z"/></g>
    </symbol>
    <symbol id="live-variables" viewBox="0 0 32 32">
      <g><path d="M30 0h-6c-1.1 0-2 .9-2 2s.9 2 2 2h4v24h-4c-1.1 0-2 .9-2 2s.9 2 2 2h6c1.1 0 2-.9 2-2V2c0-1.1-.9-2-2-2zM2 32h6c1.1 0 2-.9 2-2s-.9-2-2-2H4V4h4c1.1 0 2-.9 2-2s-.9-2-2-2H2C.9 0 0 .9 0 2v28c0 1.1.9 2 2 2zM22.2 20.7c-.2 0-.6.1-.7.1-1.1 0-3.1-.5-3.9-3.9l5.8-5.9s1.2-1.2.4-2.3c-.3-.6-1.8-1-2.6-.2l-4.3 4.3C15 8.4 11.1 8 9.7 8S8 9.8 8 10.8c0 1 .9 2.1 2.2 2.2s3.2-.2 4.1 3.2l-5.6 5.3c-.3.3-.5.6-.5 1.1 0 .5.2.8.5 1.1.3.4.8.3 1.3.3s.9 0 1.4-.4l3.8-4.1c1.9 4.2 5.3 4.5 6.7 4.5 0 0 2.1-.1 2.1-2 0-1.2-1-1.3-1.8-1.3z"/></g>
    </symbol>
    <symbol id="lock" viewBox="0 0 32 32">
      <g><path d="M26 12c0-5.5-4.5-10-10-10S6 6.5 6 12c-1.2 0-2 .9-2 2v16c0 1.1.8 2 1.9 2h20c1.1 0 2-.9 2-2V14c.1-1.1-.8-2-1.9-2zm-4.1 0h-13c0-3.9 3.1-7 7-7s7 3.1 7 7h-1z"/><path fill="#fff" d="M20 20c0-2.2-1.8-4-4-4s-4 1.8-4 4c0 1.5.8 2.8 2 3.4V26c0 1.1.9 2 2 2s2-.9 2-2v-2.6c1-.7 2-1.9 2-3.4z"/></g>
    </symbol>
    <symbol id="loser" viewBox="0 0 32 32">
      <circle cx="16" cy="16" r="16"/><path fill="#fff" d="M14 6h4v14h-4zM14 22h4v4h-4z"/>
    </symbol>
    <symbol id="paperclip" viewBox="0 0 32 32">
      <path d="M15.6 32c-4.1 0-8.2-2.4-8.2-7V6.8c0-4.5 2.9-6.8 5.8-6.8S19 2.4 19 6.8v15.8c0 2.6-1.7 3.9-3.4 3.9-.9 0-1.8-.4-2.4-1-.5-.5-1-1.4-1-2.9V8c0-.6.4-1 1-1s1 .4 1 1v14.6c0 1.3.7 1.9 1.4 1.9s1.4-.6 1.4-1.9V6.8C17 3.5 15 2 13.2 2S9.3 3.5 9.3 6.8V25c0 3.4 3.2 5 6.2 5s6.2-1.6 6.2-5V8c0-.6.4-1 1-1s1 .4 1 1v17c.1 4.6-4 7-8.1 7z"/>
    </symbol>
    <symbol id="pause" viewBox="0 0 32 32">
      <g><path d="M6 4h8v24H6zM18 4h8v24h-8z"/></g>
    </symbol>
    <symbol id="play" viewBox="0 0 32 32">
      <path d="M4 4v24l23.9-12z"/>
    </symbol>
    <symbol id="projects" viewBox="0 0 32 32">
      <g><path d="M2 4h4v4H2zM10 4h20v4H10zM2 14h4v4H2zM10 14h20v4H10zM2 24h4v4H2zM10 24h20v4H10z"/></g>
    </symbol>
    <symbol id="redo" viewBox="-471 274 16 14">
      <g><path d="M-455.7 279l-3.7 3.6c-.2.2-.4.2-.6.1-.2-.1-.3-.2-.3-.4v-7.4c0-.2.1-.4.3-.4.2-.1.4 0 .6.1l3.7 3.6c.1.1.2.2.2.4-.1.1-.1.2-.2.4"/><path d="M-465.9 277.8h8.9v1.6h-8.9c-1.7 0-3 1.3-3 3v.4c0 1.6 1.4 3 3 3h1.8c.4 0 .8.3.8.8 0 .4-.4.8-.8.8h-1.8c-2.6 0-4.6-2-4.6-4.5v-.4c-.1-2.7 2-4.7 4.6-4.7"/></g>
    </symbol>
    <symbol id="refresh" viewBox="0 0 32 32">
      <path d="M24.6 9.5l-2.2 2.2c.7 1.2 1.1 2.5 1.1 3.9 0 4.3-3.5 7.8-7.8 7.8s-7.8-3.5-7.8-7.8 3.5-7.8 7.8-7.8h.3V13l4.7-4.7 1.6-1.6L16 .5v4.4h-.3C9.8 4.9 5 9.7 5 15.6c0 5.9 4.8 10.8 10.8 10.8 5.9 0 10.8-4.8 10.8-10.8-.1-2.2-.8-4.4-2-6.1z"/>
    </symbol>
    <symbol id="save" viewBox="-472 273 15 16">
      <g><path d="M-458.9 273.9v6H-470v-6h-1.7v13.4c0 .5.4.9.9.9h12.6c.5 0 .9-.4.9-.9v-11.8l-1.6-1.6"/><path d="M-463 273.9h2.4v4.8h-2.4v-4.8z"/></g>
    </symbol>-->
    <symbol id="search-16" viewBox="0 0 16 16">
       <g><g><path d="M6.21,12.417C2.786,12.417,0,9.632,0,6.209C0,2.785,2.786,0,6.21,0c3.422,0,6.206,2.785,6.206,6.209
			C12.416,9.632,9.632,12.417,6.21,12.417z M6.21,1C3.337,1,1,3.337,1,6.209s2.337,5.208,5.21,5.208c2.87,0,5.206-2.336,5.206-5.208
			S9.08,1,6.21,1z"/> <path d="M15.5,16c-0.128,0-0.256-0.049-0.354-0.146l-5.25-5.25c-0.195-0.195-0.195-0.512,0-0.707s0.512-0.195,0.707,0l5.25,5.25
			c0.195,0.195,0.195,0.512,0,0.707C15.756,15.951,15.628,16,15.5,16z"/></g></g>
    </symbol>
    <!--
    <symbol id="settings" viewBox="0 0 32 32">
      <path d="M30.8 13.5l-3.1-.5c-.2-.9-.6-1.8-1-2.6l2-2.5c.4-.5.4-1.3 0-1.8l-1.2-1.4c-.5-.6-1.3-.7-1.8-.3L23 6.1c-1.2-.8-2.5-1.4-4-1.8l-.5-3.1C18.4.5 17.8 0 17.2 0h-1.9c-.7 0-1.3.5-1.4 1.2l-.5 3.1c-1.2.3-2.3.8-3.3 1.4L7.5 3.9c-.5-.4-1.3-.4-1.8.1L4.4 5.3c-.5.5-.5 1.3-.1 1.8l1.8 2.6c-.6 1-1.1 2.1-1.4 3.3l-3.2.5c-.7.1-1.2.7-1.2 1.4v1.9c0 .7.5 1.3 1.2 1.4l3.2.5c.2 1 .6 1.9 1 2.8l-2 2.5c-.4.5-.4 1.3 0 1.8l1.2 1.4c.5.5 1.2.6 1.8.3l2.7-1.7c1.1.8 2.4 1.4 3.8 1.7l.5 3.1c.1.7.7 1.2 1.4 1.2H17c.7 0 1.3-.5 1.4-1.2l.5-3.1c1.2-.3 2.3-.7 3.3-1.4l2.7 1.9c.5.4 1.3.3 1.8-.1l1.3-1.3c.5-.5.5-1.2.1-1.8l-1.9-2.6c.6-1 1.1-2.1 1.4-3.3l3.1-.5c.7-.1 1.2-.7 1.2-1.4v-1.9c.1-.9-.4-1.5-1.1-1.6zm-14.6 8.2c-3.3 0-5.9-2.7-5.9-5.9 0-3.3 2.7-5.9 5.9-5.9 3.3 0 5.9 2.7 5.9 5.9.1 3.3-2.6 5.9-5.9 5.9z"/>
    </symbol>
    <symbol id="star" viewBox="0 0 32 32">
      <path d="M16 2l3.7 10.7h11.1l-8.9 6.7L25.2 30 16 23.7 6.9 30l3.2-10.6-8.8-6.7h11.1z"/>
    </symbol>
    <symbol id="sync" viewBox="0 0 32 32">
      <g><path d="M24.6 9.5l-1.9 1.9c1.9 3.1 1.4 7.3-1.3 10-2 2-4.4 2.7-7.4 2.2v-5l-4.6 4.7-1.6 1.6 6.2 6.3v-4.8c3 .5 6.8-.5 9.3-3 3.7-3.9 4.2-9.8 1.3-13.9zM10.1 9.9C11.7 8.3 14 7.5 16 7.6v5.5l4.7-4.7 1.6-1.6L16 .5v4.4c-3 0-5.6 1-7.8 3.1-3.6 3.6-4.1 9-1.6 13.1l2-2c-1.5-2.9-1-6.7 1.5-9.2z"/></g>
    </symbol>
    <symbol id="trash" viewBox="0 0 32 32">
      <g><path d="M8-.1h14V2H8zM2 2h26v6H2zM4 10h22v22H4z"/></g>
    </symbol>
    <symbol id="undo" viewBox="-471 274 16 14">
      <g><path d="M-470.3 279l3.7 3.6c.2.2.4.2.6.1.2-.1.3-.2.3-.4v-7.4c0-.2-.1-.4-.3-.4-.2-.1-.4 0-.6.1l-3.7 3.6c-.1.1-.2.2-.2.4.1.1.1.2.2.4"/><path d="M-460.1 277.8h-8.9v1.6h8.9c1.7 0 3 1.3 3 3v.4c0 1.6-1.4 3-3 3h-1.8c-.4 0-.8.3-.8.8 0 .4.4.8.8.8h1.8c2.6 0 4.6-2 4.6-4.5v-.4c.1-2.7-2-4.7-4.6-4.7"/></g>
    </symbol>
    <symbol id="userlist" viewBox="0 0 32 32">
      <g><path d="M15.075 6.574c0 2.96-2.398 5.36-5.358 5.36-2.96 0-5.36-2.4-5.36-5.36 0-2.96 2.4-5.36 5.36-5.36 2.96 0 5.358 2.4 5.358 5.36"/><path d="M.57 26.43s-1.63-14.7 8.932-14.7c10.562 0 8.784 14.7 8.784 14.7s-3.22 1.186-8.846 1.186c-5.625 0-8.87-1.187-8.87-1.187"/><path d="M30.642 4.176H17.23c-.373 0-.675-.302-.675-.674v-1.7c0-.373.302-.675.675-.675h13.412c.373 0 .675.302.675.674v1.702c0 .372-.302.674-.675.674"/><path d="M30.642 18.303h-8.84c-.373 0-.675-.303-.675-.674v-1.703c0-.373.302-.674.674-.674h8.842c.373 0 .675.3.675.674v1.702c0 .37-.302.673-.675.673"/><path d="M30.642 11.446H19.515c-.372 0-.674-.303-.674-.675v-1.7c0-.373.303-.675.675-.675h11.127c.373 0 .675.302.675.675v1.7c0 .373-.302.676-.675.676"/><path d="M30.642 25.57h-6.555c-.373 0-.674-.3-.674-.673v-1.7c0-.373.3-.675.674-.675h6.555c.373 0 .675.302.675.675v1.7c0 .373-.302.674-.675.674"/></g>
    </symbol>
    <symbol id="variation-settings" viewBox="0 0 32 32">
      <g><path d="M12 12.6v-.7c-.5-2.1-2-3.8-4-4.5V0H4v7.3c-2.3.8-4 3-4 5.7s1.7 4.8 4 5.7V32h4V18.7c2-.7 3.5-2.5 3.9-4.6V13s.1-.3.1-.4zM6 16c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zM22 21.6v-.7c-.4-2.1-1.9-3.9-3.9-4.6V0h-4v16.3c-2.3.8-4 3-4 5.7s1.7 4.8 4 5.7V32h4v-4.3c2-.7 3.5-2.5 3.9-4.6v-1.5zM16 25c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.3 3-3 3zM32 9.6v-.7c-.5-2.1-2-3.8-4-4.5V0h-4v4.3c-2 .8-4 3-4 5.7s2 4.8 4 5.7V32h4V15.7c2-.7 3.5-2.5 3.9-4.6V10s.1-.3.1-.4zM26 13c-1.7 0-3-1.3-3-3s1.3-3 3-3 3 1.3 3 3-1.4 3-3 3z"/></g>
    </symbol>
    <symbol id="winner" viewBox="0 0 32 32">
      <circle cx="16" cy="16" r="16"/><path fill="#fff" d="M16.9 21.5l7.8-12.4-3.6-2.3L13.2 19l-3.6-2.3-2.3 3.6 6.8 4.5.4.3.5-.6z"/>
    </symbol> -->
</svg>


  <header id="header" class="header justify background--super-dark">
    
    <div class="link--reverse hidden is-inline-block-on-mobile nav-toggle">
      <label for="toggle-nav-checkbox">
        <svg class="icon">
          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#hamburger"></use>
        </svg>
      </label>
    </div>
    

    <a class="display--inline-block header-logo-container" href="/">
      <img src="/assets/img/optimizely-developer-logo.svg" alt="Optimizely Developers">
    </a>

    <div class="header-links display--inline-block vertical-align--top is-hidden-on-mobile">
      <div class="position--relative display--inline-block push-double--right">
        <input type="text" id="site-search" placeholder="Search" class="text-input text-input--small reverse soft-triple--right width--200">
        <svg class="icon input-icon__right reverse cursor--pointer">
          <use xlink:href="#search-16"></use>
        </svg>
      </div>

      <div class="display--inline-block">
        <ul class="unstyled nav">
          <li class="push-double--right"><a href="/overview">Overview</a></li>
          <li class="position--relative push-double--right">
            <a href="/rest/introduction" data-collapser>
              Documentation
              <span class="arrow-inline--down"></span>
            </a>
            <ul class="unstyled nav nav--stacked dropdown background--super-dark soft--sides collapsible--small is-collapsed" data-auto-close>
              
                
              
                
                  <li class="push-half">
                    <a href="/javascript/">Web</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/ios/">iOS</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/android/">Android</a>
                  </li>
                
              
                
              
                
                  <li class="push-half">
                    <a href="/rest/">REST API</a>
                  </li>
                
              
                
              
                
                  <li class="push-half">
                    <a href="/integrations/">Integrations</a>
                  </li>
                
              
                
                  <li class="push-half">
                    <a href="/apps/">Apps</a>
                  </li>
                
              
                
              
            </ul>
          </li>
          <li class="push-double--right"><a href="http://community.optimizely.com/t5/Developers/bd-p/Developers" target="_blank">Discussion</a></li>
          <li class="flush"><a href="https://devplatform.typeform.com/to/XrDLzQ">Feedback</a></li>
        </ul>
      </div>
    </div>
  </header>


  <main id="main" class="main has-nav">
    <input id="toggle-nav-checkbox" class="hidden" type="checkbox">
<nav id="nav">
  <div class="nav-sidebar">

    <div class="soft-double">
      
        
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/overview">Overview</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Solutions</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section active" href="/javascript" data-collapser>Web</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible">
                    
                      <li>
                        <a class="section" href="/javascript/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section active" href="/javascript/code-samples/index.html">Code Samples</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/javascript/personalization/index.html">Personalization</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/ios" data-collapser>iOS</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/ios/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/faqs/index.html">FAQs</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/guide/index.html">Tutorial</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/changelog/index.html">Changelog</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/ios/articles/index.html">Articles</a>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                      <li>
                        <a class="section" href="/ios/help/html/index.html" target="_blank">Apple Docs <img class="display--inline-block" width="12" height="12" src="/assets/img/external-link.png"></a>
                      </li>
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/android" data-collapser>Android</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/android/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/faqs/index.html">FAQs</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/guide/index.html">Tutorial</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/changelog/index.html">Changelog</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/android/articles/index.html">Articles</a>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                      <li>
                        <a class="section" href="/android/help/index.html" target="_blank">Java Docs <img class="display--inline-block" width="12" height="12" src="/assets/img/external-link.png"></a>
                      </li>
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Management</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/rest" data-collapser>REST API</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/rest/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/getting-started/index.html">Getting started</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/reference/index.html">Reference</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/rest/conditions/index.html">Audience Conditions</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Authentication</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/oauth">OAuth 2.0</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/token">Token based</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Data Services</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/events" data-collapser>Event Access</a>

                  <!-- TOC for single pages -->
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    
                      <li>
                        <a class="section" href="/events/introduction/index.html">Introduction</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/events/api/index.html">Event API</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    
                      <li>
                        <a class="section" href="/events/export/index.html">Data Export</a>
                        
                          <ul class="unstyled nav nav--stacked toc"></ul>
                        
                        
                      </li>
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/customer-profiles">Customer Profiles</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/results">Experiment Results</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Add Ons</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/integrations">Integrations</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/apps">Apps</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/extensions">Extensions</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
        
          
            <label class="label caps micro muted">Community</label>
          
          <ul class="unstyled epsilon push--bottom soft-half--bottom">
            
              <!-- Hide if its a hidden section unless its the current path (users go direct to the url) -->
              
                <li>
                  <a class="main-section" href="/libs">Libraries</a>

                  <!-- TOC for single pages -->
                  
                    <ul class="unstyled nav nav--stacked epsilon soft--left toc"></ul>
                  

                  <!-- Sub sections -->
                  <ul class="unstyled nav nav--stacked epsilon soft--left collapsible is-collapsed">
                    

                    <!-- Add links to auto generated docs -->
                    
                    
                  </ul>
                </li>
              
            
          </ul>
        
      
    </div>
  </div>
</nav>


    <div id="content" class="content soft-half--ends max-width--900">
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="introduction">Introduction</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>In order to help you get up and running quickly, we have provided a number of code samples that you can use.
Be sure to modify the code appropriately before running in production!</p>
<h4 id="table-of-contents">Table of Contents</h4>
<ul>
<li><p><em>Event tracking:</em> To track events that are not provided out of the box by Optimizely (e.g. purchase data or offline conversions), check out our section on <a href="#advanced-goal-tracking">Events</a> which explains all of our available tracking APIs.</p>
</li>
<li><p><em>Custom JS conditions:</em> If you expose first or third party data on the client, then you can use Optimizely&#39;s <a href="#custom-js">custom JS conditions</a> to port data into different audiences.</p>
</li>
<li><p><em>Advanced use cases:</em> These <a href="#advanced-use-cases">advanced use cases</a> will help you push the limits of what Optimizely is capable of doing within Project, Experiment, and Variation JavaScript.</p>
</li>
<li><p><em>Conditional activation:</em> Sometimes you&#39;ll want to trigger an Optimizely experiment dynamically, after some part of the page or screen has loaded. Read our <a href="#conditional">Conditional activation</a> section for more information on how to control when Optimizely activates.</p>
</li>
<li><p><em>Helper functions:</em> Many times, it is necessary to use getter and setter methods within Optimizely to better interact with your website. This list of <a href="#helpers">helper functions</a> are frequently used in Project, Experiment, and Variation JavaScript.</p>
</li>
<li><p><em>Mutually Exclusive:</em> In addition to normal experiments, you can <a href="#mutually-exclusive">mutually exclusive</a> experiments.</p>
</li>
<li><p><em>Single page apps:</em> On traditional websites, when visitors click links, the links generally lead to a new URL and load an entirely new page. In Single Page Applications, the whole page doesn&#39;t reload; instead, certain content is changed, loaded, and swapped out in the current URL. Check out our <a href="#single-page-apps">single page app</a> section to help accommodate the behavior of Single Page Applications.</p>
</li>
<li><p><em>Integrations:</em> Whether you&#39;re looking to create a custom integration with an analytics platform or if you&#39;re looking to do WordPress headline testing with Optimizely, these <a href="#technology-integrations">integration code samples</a> will help you navigate these processes.</p>
</li>
<li><p><em>Variation code:</em> If you would like to write your own variation code instead of using the Optimizely visual editor, check out our <a href="#variation-code">Variation code</a> section that explains how to format Optimizely variations with example code.</p>
</li>
</ul>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="advanced-goal-tracking">Event tracking</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>These code samples can be used to track goals after specific user actions. The majority of these code samples should be used in <a href="https://help.optimizely.com/hc/en-us/articles/202480860-Project-Settings-Implementation-JavaScript-jQuery-and-Privacy#project_javascript">Project JS</a>, <a href="https://help.optimizely.com/hc/en-us/articles/200039855-Experiment-JavaScript-and-CSS-Run-JavaScript-and-CSS-across-all-variations#experiment_javascript">Experiment JS</a>, or <a href="https://help.optimizely.com/hc/en-us/articles/200039835-The-Code-Editor-Edit-Code-and-Variation-Code#edit_code">Variation JS</a>.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="advanced-goal-tracking-scroll-depth-milestones">Scroll depth</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function checks after each scroll event to see if a visitor has achieved certain scroll depth milestones. In the case of this example, custom events will be fired off when a visitor scrolls 25%, 50%, 75%, and 100% of the way down the page. Within the goals menu, you&#39;ll need to create custom event goals that correspond to the events below (e.g. &quot;scroll25&quot; for scrolling 25% of the way down the page).</p>
<p>NOTE: This code uses jQuery&#39;s .scrollTop() method which is not included in Optimizely&#39;s trimmed version of jQuery. To use this code within your Optimizely experiment, you must either include the full version of jQuery in <a href="https://help.optimizely.com/hc/en-us/articles/202480860-Project-Settings-JavaScript-jQuery#jS">Project Settings</a> or use a native version of jQuery on the page.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function fires custom events at different scroll depth milestones.
 */

  // Variables to prevent continuous firing of custom events

  var scrollTwentyFive = true;
  var scrollFifty = true;
  var scrollSeventyFive = true;
  var scrollOneHundred = true;

  // Create the scrollPercentage

  $(window).bind(&#39;scroll&#39;, function() {
      window.scrollPercent = ($(window).scrollTop() / ($(document).height() - $(window).height())) * 100;

      // Conditional code we&#39;ll use to fire events based on scrollPercentage.

      if (window.scrollPercent &gt;= 25 &amp;&amp; scrollTwentyFive) {
          window[&#39;optimizely&#39;] = window[&#39;optimizely&#39;] || [];
          window.optimizely.push([&quot;trackEvent&quot;, &quot;scroll25&quot;]);
          scrollTwentyFive = false;
      }

      if (window.scrollPercent &gt;= 50 &amp;&amp; scrollFifty) {
          window[&#39;optimizely&#39;] = window[&#39;optimizely&#39;] || [];
          window.optimizely.push([&quot;trackEvent&quot;, &quot;scroll50&quot;]);
          scrollFifty = false;
      }

      if (window.scrollPercent &gt;= 75 &amp;&amp; scrollSeventyFive) {
          window[&#39;optimizely&#39;] = window[&#39;optimizely&#39;] || [];
          window.optimizely.push([&quot;trackEvent&quot;, &quot;scroll75&quot;]);
          scrollSeventyFive = false;
      }

      if (window.scrollPercent &gt;= 100 &amp;&amp; scrollOneHundred) {
          window[&#39;optimizely&#39;] = window[&#39;optimizely&#39;] || [];
          window.optimizely.push([&quot;trackEvent&quot;, &quot;scroll100&quot;]);
          scrollOneHundred = false;
      }

  });
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="custom-js">Custom JS conditions</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>These code samples can be used within the <a href="https://help.optimizely.com/hc/en-us/articles/200040845-Custom-JavaScript-audience-targeting">Custom JS Audience Condition</a>. Keep in mind that the JavaScript within this condition must evaluate to a boolean value on the last line of the code.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="advanced-targeting-data-access">Access data on page</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This is an example using JavaScript to access an object defined outside of the Optimizely snippet.  Please note that the variable must be declared above the snippet, so it is defined before Optimizely evaluates Audience conditions or executes experiment code.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    Example showing how to reference a variable defined natively on the page from inside Optimizely.
 *
 */

 // Audience condition example checking the &#39;category&#39; property of the &#39;exampleObject&#39;
 window.exampleObject[&#39;category&#39;] == &#39;shirts&#39;;
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="meta-values">Target pages based on meta values</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>The following condition will only run an experiment when a certain meta value is present on the page.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 * Replace &quot;desired_value&quot; with the name of the meta value you&#39;re testing for.
 */

 $(&#39;meta[name=&quot;desired_value&quot;]&#39;).length &gt; 0
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="screen-sizes">Target visitors based on screen size</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>The first condition will ensure that the experiment only runs if the screen width is greater than 1400 pixels and the height is greater than 800 pixels. The second condition will ensure the experiment only runs if the viewport width is between 320 and 480 pixels and the height is less than or equal to 640 pixels.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *  Specifies window size (in pixels) to target visitors.
 */

 //target desktop viewports
 //matches CSS media queries for height/width or max/min-height or -width
 window.innerWidth &gt; 1400 &amp;&amp; window.innerHeight &gt; 800

 //target mobile phones
 //matches CSS media queries using device-height and device-width
 screen.width &gt;= 320 &amp;&amp; screen.width &lt;= 480 &amp;&amp; screen.height &lt;= 640
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="user-agent">Target specific user agents</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>The following condition will only run for visitors who are using the Google Chrome web browser.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *  Targets visitors based on user-agent.
 */

 window.navigator.userAgent.indexOf(&quot;Chrome&quot;) !== -1
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="advanced-use-cases">Advanced use cases</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>These code samples can be used within <a href="https://help.optimizely.com/hc/en-us/articles/200039855-Experiment-JavaScript-and-CSS-Run-JavaScript-and-CSS-across-all-variations#experiment_javascript">Experiment JS</a> or <a href="https://help.optimizely.com/hc/en-us/articles/200039835-The-Code-Editor-Edit-Code-and-Variation-Code#edit_code">Variation JS</a> to help satisfy advanced use cases within Optimizely.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="advanced-use-cases-code-eval-limit">Execute code for X visits</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will let you execute code a certain number of times within an experiment.</p>
<p>For example, you might want to only show a pop up to visitors on their first 3 visits.  In this case, you place this code in either the Experiment JS or Variation code.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 * Usage
 *   The following allows you to set a limit on the number of times a Code Block will execute for any given visitor.
 */

 // the number of times the code should execute for a given visitor
 var limit = 3;
 // the number of days the evaluation limit should last
 var days = 180;
 // name of the cookie we use as the counter
 var cookieName = &#39;counterCookie&#39;;

 // function to fetch cookie values
 var getCookie = function(name) {
   var match = document.cookie.match(name+&#39;=([^;]*)&#39;);
   return match ? match[1] : undefined;
 };

 // function to create cookies
  var setCookie = function(c_name,value,exdays,c_domain) {
    c_domain = (typeof c_domain === &quot;undefined&quot;) ? &quot;&quot; : &quot;domain=&quot; + c_domain + &quot;;&quot;;
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value=escape(value) + ((exdays==null) ? &quot;&quot; : &quot;; expires=&quot;+exdate.toUTCString());
    document.cookie=c_name + &quot;=&quot; + c_value + &quot;;&quot; + c_domain + &quot;path=/&quot;;
  }

 // logic that counts and limits number of times code can evaluate for given visitor
 if (!getCookie(cookieName)) {
   setCookie(cookieName, 1, days, window.location.hostname);
 } else {
   var numberPops = parseInt(getCookie(cookieName)) + 1;
   setCookie(cookieName, numberPops, days, window.location.hostname);
 }

 if (getCookie(cookieName) &lt;= limit) {
  // INSERT code to evaluate HERE
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="advanced-use-cases-browserTab-test">Change page title</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will modify the text of the browser tab when a visitor focuses and unfocuses on the tab.  You can display one title when a visitor is focused on the tab and a different title when they toggle to a different tab or window.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 * Usage
 *   The following code will modify the title of the browser tab on the &quot;blur&quot; event and change it back to the original on the &quot;focus&quot; event.
 *
 */

 // store the original tab title
 var origTitle = document.title;

 // function to change title when focusing on tab
 function oldTitle() {
   document.title = origTitle;
 }

 // function to change title when un-focusing on tab
 function newTitle() {
   document.title = &#39;HELLO WORLD&#39;;
 }

 // bind functions to blur and focus events
 window.onblur = newTitle;
 window.onfocus = oldTitle;
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="advanced-use-cases-get-conversion-info">Get offline conversion parameters</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript loops through the Optimizely Data Object to return the information necessary to construct the off-line conversions URL.  Please note this code is only valid on pages where an experiment is currently running.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    Loops through the Optimizely Data Object to return the information necessary to construct the off-line conversions URL.
 *
 */

 // grab the endUserID from the Optimizely Cookie
 var endUserId = document.cookie.match(&#39;optimizelyEndUserId=([^;]*)&#39;)[1];

 for (var i=0; i &lt; optimizely.activeExperiments.length; i++) {
   var experimentID = optimizely.activeExperiments[i];
   var variationID = optimizely.variationIdsMap[experimentID];
   var variationName = optimizely.variationNamesMap[experimentID];
   // code to pass this data to your backend should go here
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="conditional">Conditional activation</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p><a href="https://help.optimizely.com/hc/en-us/articles/200040225-Activation-Mode-Activating-an-experiment-dynamically-after-a-page-has-loaded#conditional">Conditional activation mode</a> is a flexible and powerful way to activate an experiment. There are two ways to use it: with <strong>polling</strong>, you enter a condition and Optimizely activates the experiment once that condition is true. With a <strong>callback</strong>, you enter a function and trigger a callback once your code is ready for the experiment to activate. These methods are described in more detail below, and we&#39;ve also highlighted several examples using each method.</p>
<p>Based on the code you enter, Optimizely will automatically determine if it should be polled for or executed as a function. See the examples for detailed usage definitions.</p>
<h4 id="polling">Polling</h4>
<p>If the code entered <strong>does not</strong> evaluate to a function type, it will be checked every 50ms and the experiment will be activated when it evaluates to true. Optimizely checks this code in a try/catch block, so a condition which results in an error will be assumed to be false and polling will continue.</p>
<h4 id="callback-function">Callback Function</h4>
<p>If the code entered <strong>is</strong> a function, Optimizely will assume it is of the form shown here and call it immediately, passing an <code>activate</code> function and an <code>options</code> object. Rather than returning a value, your code should call <code>activate()</code> when it is ready, leveraging <code>options.isActive</code> and <code>options.experimentId</code> if needed. Note that because this function is called immediately when the Optimizely snippet loads, any functions or variables referenced here should be available/defined at the time they are used.</p>
<p><strong>Note:</strong> No matter which method is used, remember that this is only an activation condition. Visitors must still meet URL and Audience targeting to actually be bucketed into the experiment.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 * Usage Option #1 - Polling
 *   Optimizely will poll for the code condition to be true if the JavaScript
 *   entered does not evaluate to a function type.
 *
 *  Note: Optimizely will evaluate this code in a try/catch block, meaning
 *  if your expression errors, it will be evaluated as false
 */

 [Code whose last line evaluates to true/false, just like custom JS targeting]


/*
 * Usage Option #2 - Callback Function
 *   Optimizely will call the function entered immediately if the JavaScript entered
 *   does evaluate to a function type.
 *
 * @param {Function} activate - Activate this experiment
 * @param {Object=}  options {
 *                     isActive : {Boolean} - Indicates if this experiment is active
 *                     experimentId : {Integer} - This experiment&#39;s Id
 *                   }
 *
 *  Note: Optimizely will call this function immediately when the snippet loads, so make
 *  sure any functions referenced are defined at that time.
 */

 function(activate, options) {
   // Do logic and call `activate()` when appropriate
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-meta-tag">Polling - Meta tag data</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment based on the value of a meta tag, select the contents of the meta tag with jQuery and check them for your value.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->

<h4>Example HTML</h4>
<pre>
<pre><code class="lang-html">&lt;meta name=&quot;keywords&quot; content=&quot;movies,games,videos,photos&quot;/&gt;
</code></pre>

</pre>


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when the description meta tag contains &#39;sports&#39;, &#39;games&#39;, or &#39;puzzles&#39;
 * Type: Polling
 */

 (/sports|games|puzzles/).test($(&#39;meta[name=keywords]&#39;).attr(&#39;content&#39;))
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-js-variable">Polling - JavaScript variable</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment based on the value of a JavaScript variable, simply enter the condition to check.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when the Omniture eVar 33 contains &#39;product&#39;
 * Type: Polling
 */

 window.s.eVar33.indexOf(&#39;product&#39;) != -1
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-dom-element">Polling - DOM element</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment based on the existence of a DOM element, simply select that element with jQuery and check the length of the result.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when the green button DOM element appears
 * Type: Polling
 */

 $(&#39;button.green&#39;).length &gt; 0
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-button-click">Function - Button click</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment when a button is clicked on, bind a <code>click</code> or <code>mousedown</code> event to that element using jQuery and activate the experiment when that event fires.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when a button is clicked
 * Type: Callback function
 */

 function(activate, options) {
   $(&#39;html&#39;).delegate(&#39;#btn&#39;, &#39;mousedown&#39;, function() {
     activate();
   });
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-ajax-complete">Function - AJAX response</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment after an AJAX call returns, leverage jQuery&#39;s <code>ajaxComplete</code> function to listen to completed AJAX requests. If the response contains or corresponds to the element that should be changed, activate the experiment.</p>
<p>Note: Optimizely&#39;s default (trimmed) version of jQuery does not contain the <code>ajaxComplete</code> function. To use this function, you can include the full version of jQuery in your Optimizely snippet (Project Settings -&gt; Project Code Settings) or reference your own version of jQuery which loads above the Optimizely snippet via <code>window.$</code>.</p>
<p>Additionally, <code>$.ajaxComplete</code> can be disabled on your site if the AJAX setup is called with <code>global</code> option set to <code>false</code>, preventing this event from firing. See <a href="http://api.jquery.com/ajaxcomplete/">jQuery&#39;s documentation</a> for more information.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when an AJAX call contains the element that should be changed
 * Type: Callback function
 */

 function(activate, options) {
   $(document).ajaxComplete(function(event, xhr, settings) {
     if (xhr.responseText.indexOf(&#39;rightRailModule&#39;) != -1) {
       activate();
     }
   });
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-angular-page-change">Function - Angular page change</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>To activate an experiment when an Angular.js location change happens, setup an event listener on the <code>$locationChangeSuccess</code> event and activate the experiment if the page change meets the right criteria.</p>
<p>Note: Not all Angular.js implementations are the same and thus this exact implementation may not work correctly on all websites. This is just an example of how to leverage built in Angular.js functions to activate an experiment at the right time.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when an Angular.js application successfully changes location
 * Type: Callback function
 */

 function(activate, options) {
   var scope = window.angular.element(&#39;body&#39;).scope();
   scope.$on(&#39;$locationChangeSuccess&#39;, function(event, next, current) {
     if (next.indexOf(&#39;/productPage&#39;) != -1) {
       if (!options.isActive) {
         activate();
       }
     }
   });
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="conditional-activation-dom-mutation">Function - DOM mutation activation</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>Note: This activation mode requires that you have Project Javascript enabled on your account. If you don&#39;t currently have ProjectJS in your account, you can upgrade! Get more information at: <a href="https://help.optimizely.com/hc/en-us/articles/200040055#switching">https://help.optimizely.com/hc/en-us/articles/200040055#switching</a></p>
<p>To activate an experiment based on a DOM element either changing or appearing on the page, simply make the following call in your experiment&#39;s conditional activation code box:</p>
<pre><code class="lang-js">function(activate, options) {
  window.activateOnDOMMutation(&#39;#element:not(.changed)&#39;, activate, true);
}
</code></pre>
<p>The first part of the call, <code>#element:not(.changed)</code>, is a DOM element selector that you would like to monitor. Any time this element appears on the page or is changed, the experiment will be activated either once or multiple times depending on the last parameter. You can use any DOM selector that you can use with jQuery. If you are change the selected element or its children in variation code you will create an infinite loop. You can prevent this by excluding selectors with an added class as shown in the code example. You would add the &quot;.changed&quot; class in experiment code.</p>
<p>The second part of the call, <code>activate</code>, activates the experiment with the given ID.</p>
<p>The last parameter, <code>true</code>, tells the DOM Mutation call whether you want to re-activate the experiment every time the selector changes or is added to the page. Adding &#39;false&#39; here will only activate the experiment once. This is useful when you are appending content to the page and you don&#39;t want to append every time the DOM selector changes.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Condition: Activate when the dom selector changes on the page
 * Type: Callback Function
 *
 * Place the following code in your Project Javascript and call the function below in your experiment&#39;s
 * conditional activation code box:
 *
 * window.activateOnDOMMutation(&#39;#element&#39;, window[&#39;optimizely&#39;].push([&quot;activate&quot;, EXPERIMENT_ID]), true);
 * @param &#39;#element&#39;: DOM Selector of element you&#39;d like to watch
 * @param &#39;window[&#39;optimizely&#39;].push([&quot;activate&quot;, EXPERIMENT_ID])&#39;: Replace EXPERIMENT_ID with the current
 * experiment&#39;s ID
 * @param &#39;true&#39;: True re-activates the experiment on the DOM selector changing or being added to the DOM.
 * False activates the experiment only the first time the selector is added or updated.
 */

(function(win) {
    &#39;use strict&#39;;

    var listeners = [],
        doc = win.document,
        MutationObserver = win.MutationObserver || win.WebKitMutationObserver,
        observer;

    function waitForElement(selector, repeat, fn) {

        // Store the selector and callback to be monitored
        listeners.push({
            selector: selector,
            fn: fn,
            repeat: repeat,
        });
        if (!observer) {
            // Watch for changes in the document
            observer = new MutationObserver(check);
            observer.observe($(document), {
                childList: true,
                subtree: true
            });
        }
        // Check if the element is currently in the DOM
        check();
    }

    function check() {
        // Check the DOM for elements matching a stored selector
        for (var i = 0, len = listeners.length, listener, elements; i &lt; len; i++) {
            listener = listeners[i];
              // Query for elements matching the specified selector
              elements = $(listener.selector);
              for (var j = 0, jLen = elements.length, element; j &lt; jLen; j++) {
                 element = elements[j];
                if (!element.ready || listener.repeat) {
                     // Invoke the callback with the element
                      listener.fn.call(element, element);
                  }
             }
        }
    }

    function activateOnDOMMutation(selector, activate, repeat) {
      repeat = repeat === undefined ? false : repeat;
      if (window.MutationObserver || window.WebKitMutationObserver) {
        waitForElement(selector, repeat, function(element) {
           activate();
        });
      } else {
        // this solution does not handle older browsers
      }
    }

    // Expose functions
    win.waitForElement = waitForElement;
    win.activateOnDOMMutation = activateOnDOMMutation;

})(this);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="helpers">Helper functions</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>Below are some helper functions you might find useful to run more customized Optimizely experiments. These code samples are typically used in the <a href="https://help.optimizely.com/hc/en-us/articles/200039835-The-Code-Editor-Edit-Code-and-Experiment-JS-CSS">Edit Code box or Experiment JS</a>, unless otherwise noted.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-read-cookie">Read cookie</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function reads a cookie from the visitor&#39;s browser and returns the value.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function will return the value of the cookie name passed in as the argument.
 *
 *  @param {String} name - The name of the cookie.
 */

 var getCookie = function(name) {
   var match = document.cookie.match(name+&#39;=([^;]*)&#39;);
   return match ? match[1] : undefined;
 };
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-set-cookie">Set cookie</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function sets a cookie and accepts the cookie&#39;s name, value, domain and duration in days as arguments.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function will set a cookie on the visitor&#39;s browser.
 *
 *  @param {String} c_name - The name of the cookie.
 *  @param {String} value - The value of the cookie.
 *  @param {Float} exdays - The number of days the cookie should last.
 *  @param {String} c_domain - The domain on which this cookie should be set and can be read.

 *
 */

 var setCookie = function(c_name,value,exdays,c_domain) {
   c_domain = (typeof c_domain === &quot;undefined&quot;) ? &quot;&quot; : &quot;domain=&quot; + c_domain + &quot;;&quot;;
   var exdate=new Date();
   exdate.setDate(exdate.getDate() + exdays);
   var c_value=escape(value) + ((exdays==null) ? &quot;&quot; : &quot;; expires=&quot;+exdate.toUTCString());
   document.cookie=c_name + &quot;=&quot; + c_value + &quot;;&quot; + c_domain + &quot;path=/&quot;;
 }
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-poll-for-element">Poll for element</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function polls for an element on the page every 50ms that matches a specified selector.  This is useful when you want to modify an element that is not injected into the DOM until shortly after document ready.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function is a recursive setTimeout of 50ms that polls for an element matching the selector in the if statement.
 *  @param {String} selector - The CSS path for the selector that you&#39;re polling for.
 */

 var pollForElement = function(selector) {
   if ($(selector).length &gt; 0) {
   // code to run once element is found on page
   }
   else {
     setTimeout(pollForElement, 50);
   }
 };
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-external-js">Load external JavaScript</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function will append an external JavaScript to the head of the document.  You can optionally provide a callback function as well.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function will append an external JavaScript to the head of the document.
 *
 *  @param {String} location - The location of the file you&#39;d like to load.
 *  @param {Function} callback - [OPTIONAL] A function to call when the script has completed downloading.
 *
 */

 var loadScript = function(location, callback){
   var fileRef = document.createElement(&#39;script&#39;);
   fileRef.setAttribute(&#39;type&#39;,&#39;text/javascript&#39;);

   if (callback) {
     if (fileRef.readyState) {  // IE
       fileRef.onreadystatechange = function() {
         if (fileRef.readyState == &#39;loaded&#39; || fileRef.readyState == &#39;complete&#39;) {
           fileRef.onreadystatechange = null;
           callback();
         }
       };
     } else {  // Non-IE
       fileRef.onload = function(){
         callback();
       };
     }
   }

   fileRef.setAttribute(&#39;src&#39;, location);
   document.head.appendChild(fileRef);
 };

 loadScript(&#39;http://www.example.com/test.js&#39;, function() {
   // CALLBACK - code that does something with the data returned by loading the script
 });
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-get-parameter">Get query parameter value</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This function will return the value of a query parameter.  This is useful if you&#39;d like to render a query parameter value on the page itself.</p>
<p>For example, you may store a visitor&#39;s search term in a query parameter.  You can use this function to render their search term on the page, providing a personalized experience.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Usage
 *    This function takes a query parameter name and returns its value.
 *
 *  @param {String} name - The name of the query parameter, whose value you want returned.
 */

 var getQueryParam = function(name) {
   var match = window.location.search.match(name + &#39;=([^&amp;]*)&#39;);
   return match ? match[1] : undefined;
 }

 // example showing the function called, with the return value inserted in the first h1 element
 $(&#39;h1:eq(0)&#39;).text(getQueryParam(&#39;myParam&#39;));
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-dynamic--content-clicks">Track clicks on dynamic content</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will let you track clicks on elements loaded after DOM ready as a custom event in Optimizely.  See our article on <a href="https://help.optimizely.com/hc/en-us/articles/200039925">Custom Event Goals</a> to learn more about tracking custom events.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 *  Usage
 *    Track clicks on elements loaded after DOM ready.  The .delegate() method allows you to select all current and future elements that match the selector passed in as the first argument.
 *
 *  @param {String} selector - Provide the element selector.
 *  @param {String} eventName - Provide the custom event name.
 */

 var selector = [YOUR_SELECTOR];
 var eventName = [YOUR_EVENT_NAME];

 $(&#39;html&#39;).delegate(selector, &#39;mousedown touchend&#39;, function() {
   window[&#39;optimizely&#39;] = window[&#39;optimizely&#39;] || [];
   window.optimizely.push([&quot;trackEvent&quot;, eventName]);
 });
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-sticky-nav">Sticky navigation bar</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will make one element&#39;s position fixed once the visitor scrolls below its original position.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 *  Usage
 *     Pass in the ID of an element whose position you want fixed once the visitor scrolls past the element&#39;s initial position.  If the visitor scrolls up again, the element will take on its original position.
 *
 *  @param {String} id - The CSS ID of the element you want to have fixed position.
 *
 */

 var makeSticky = function(id) {
   var menuOffset = document.getElementById(id).offsetTop;
   var docScroll = $(document).scrollTop();
   $(document).bind(&#39;ready scroll&#39;, function() {
     docScroll = $(document).scrollTop();
     if(docScroll &gt;= menuOffset) {
       $(&#39;#&#39;+id).css({&#39;position&#39;:&#39;fixed&#39;, &#39;top&#39;:&#39;0&#39;, &#39;z-index&#39;: &#39;1000&#39;});
     } else {
       $(&#39;#&#39;+id).css({&#39;position&#39;:&#39;initial&#39;,&#39;z-index&#39;:&#39;0&#39;});
     }
   });
 }

 // Usage example
 makeSticky(&#39;mainNavBar&#39;);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-add-query-param">Redirect - Query parameter</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will redirect a visitor to a new URL after appending a query parameter you specify.</p>
<p>Please exclude the query parameter as an Audience condition to prevent it from getting added multiple times.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 *  Usage
 *    This JavaScript will add a query parameter you specify to the visitor&#39;s current URL.
 *
 *  @param {String} newQuery - Parameter key-value pair. Replace [PARAM_NAME] and [PARAM_VALUE] with your values.
 */

/* _optimizely_redirect=http://custom_add_query_param */
var newQuery = &quot;[PARAM_NAME]=[PARAM_VALUE]&quot;;
var _optly = {redir: document.createElement(&quot;a&quot;)};
_optly.redir = {protocol: &quot;https:&quot; == document.location.protocol ? &quot;https://&quot; : &quot;http://&quot;,
                domain: window.location.hostname,
                pathname: window.location.pathname
               };
_optly.cur = window.location.search;
if (_optly.cur) {
  _optly.redir.query = _optly.cur + &quot;&amp;&quot; + newQuery;
} else {
  _optly.redir.query = &quot;?&quot; + newQuery;
}
_optly.redir.href = _optly.redir.protocol + _optly.redir.domain + _optly.redir.pathname + _optly.redir.query;
window.location.replace(_optly.redir.href);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-new-path">Redirect - New path</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will redirect a visitor to a new path, preserving the rest of the URL.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 *  Usage
 *    This JavaScript will redirect a visitor to a new path.
 *
 *  @param {String} newPath - Replace &quot;/[NEW_PATH]&quot; with your new path, but keep the &#39;/&#39;.
 */

/* _optimizely_redirect=http://custom_new_path */
var newPath = &quot;/[NEW_PATH]&quot;;
var _optly = {redir: document.createElement(&quot;a&quot;)};
_optly.redir = {protocol: &quot;https:&quot; == document.location.protocol ? &quot;https://&quot; : &quot;http://&quot;,
                domain: window.location.hostname,
                query: window.location.search
               };
_optly.redir.href = _optly.redir.protocol + _optly.redir.domain + newPath + _optly.redir.query;
window.location.replace(_optly.redir.href);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-diff-domain">Redirect- Same path different domain</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will redirect a visitor to a new domain, preserving the rest of the URL.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 *  Usage
 *    This JavaScript will redirect a visitor to the same path on a different domain.  Make sure NOT to include the protocol when passing in the NEW_DOMAIN.
 *
 *  @param {String} newDomain - Change &quot;[NEW_DOMAIN]&quot; to the new domain, NOT including the protocol.
 */

/* _optimizely_redirect=http://custom_new_domain */
var newDomain = &quot;[NEW_DOMAIN]&quot;;
var _optly = {redir: document.createElement(&quot;a&quot;)};
_optly.redir.href = window.location.href;
_optly.redir.hostname = newDomain;
window.location.replace(_optly.redir.href);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="helpers-keep-hash">Redirect - Hash parameter</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will redirect a visitor to a new URL while preserving the hash parameters.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 *  Usage
 *    This JavaScript will redirect a visitor to the URL you pass in while preserving all hash parameters.  Be sure to include the protocol in the [REDIRECT_URL]
 *
 *  @param {String} redirectUrl - Replace &quot;[REDIRECT_URL]&quot; with the new URL.
 */

/* _optimizely_redirect=http://custom_keep_hash */
var redirectUrl = &quot;[REDIRECT_URL]&quot;;
var _optly = {redir:document.createElement(&quot;a&quot;)};
_optly.redir.href = redirectUrl;  //
_optly.cur = window.location.search;
if (_optly.cur) {
  _optly.redir.search = _optly.redir.search ? _optly.cur + &quot;&amp;&quot; + _optly.redir.search.slice(1) : _optly.cur;
}
if (window.location.hash) {
  _optly.redir.hash = window.location.hash;
}
window.location.replace(_optly.redir.href);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="mutually-exclusive">Mutually Exclusive</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>These code samples are for mutually exclusive experiments.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="mutually-exclusive-projectjs">Tagging Experiment Names (Requires ProjectJS)</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This code allows you to bucket users into different experiments that would otherwise all run simultaneously. Implementing mutually exclusive code does REDUCE the amount of users exposed to each experiment tagged with a mutually exclusive tag.</p>
<p>An informational slide deck can be found at: <a href="https://docs.google.com/presentation/d/1k4DlrxCcz35AXo1qq2O9xEhN8rD5XYN4aMc4QHWNOPE/edit?usp=sharing">https://docs.google.com/presentation/d/1k4DlrxCcz35AXo1qq2O9xEhN8rD5XYN4aMc4QHWNOPE/edit?usp=sharing</a></p>
<p>Execution flow for the code:</p>
<ul>
<li>First evaluate whether none of the experiments will be picked. There is a 5% chance for this condition and its called a global holdout as designated by the &#39;[ME] holdout&#39;.</li>
<li>Next a random number picks whether the group or ME flow phase is picked.</li>
<li>If the group flow is picked, a flow within each group picks either one group ME experiment marked [Group_A_ME] or all group experiments not marked with an ME [Group_A].</li>
<li>There is a 5% chance within the group flow to pick a holdout experiment if it exists.</li>
<li>If the ME flow is picked, one experiment marked with an [ME] is selected.</li>
</ul>
<p>Helpful Tips:</p>
<ul>
<li>Use the same url targeting and audiences in experiments that are in the same group.</li>
<li>Tag mutually exclusive experiments within each group with an ME in the tag: [Group_X_ME].</li>
<li>Tag experiments that are run sitewide that affect other experiments with [ME] to disallow any group experiments from running.</li>
<li>Run a holdout experiment in group tags and me tags to maintain a baseline: [Group_X] holdout or [ME] holdout.</li>
<li>You can run a setup with just [ME] tags or just [Group_X] tags.</li>
<li>You aren&#39;t forced to run any of the tags for the code to work as expected.</li>
</ul>
<p>If you don&#39;t currently have ProjectJS in your account, you can upgrade! Get more information at: <a href="https://help.optimizely.com/hc/en-us/articles/200040055#switching">https://help.optimizely.com/hc/en-us/articles/200040055#switching</a></p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">
/*
 * Usage
 *
 * Place this code in your project JS.
 * This code allows you to run mutually exclusive experiments by tagging experiment names.
 * Experiment naming convention includes [ME], [ME] holdout,
 * [Group_X] where X can be any letter, [Group_X_ME], and [Group_X] holdout
 *
 * See http://developers.optimizely.com/samples/#mutually-exclusive for more information
 * about running mutually exclusive experiments.
 *
 */

function getParameterByName(e){e=e.replace(/[\[]/,&quot;\\[&quot;).replace(/[\]]/,&quot;\\]&quot;);var o=new RegExp(&quot;[\\?&amp;]&quot;+e+&quot;=([^&amp;#]*)&quot;),n=o.exec(location.search);return null===n?&quot;&quot;:decodeURIComponent(n[1].replace(/\+/g,&quot; &quot;))}function getRunningExperiments(){var e=[];for(var o in DATA.experiments){var n=DATA.experiments[o];n.enabled&amp;&amp;-1===window.location.search.indexOf(&quot;x&quot;+o)&amp;&amp;e.push(o)}return window.running=e,e}function getRunningExclusiveExperiments(e){var o=[];for(var n in DATA.experiments){var r=DATA.experiments[n];if(r.enabled&amp;&amp;-1===window.location.search.indexOf(&quot;x&quot;+n)){var t=DATA.experiments[n].name.toLowerCase().indexOf(&quot;[Group_&quot;.toLowerCase()),i=DATA.experiments[n].name.toLowerCase().indexOf(&quot;[ME]&quot;.toLowerCase());t&gt;-1&amp;&amp;e||i&gt;-1&amp;&amp;e?o.push(n):-1!=t||-1!=i||e||o.push(n)}}return e?window.running_exclusive=o:window.running_non_exclusive=o,o}function expArrayToJSON(e,o,n){var r={};if(n)for(var t in e)t!=o&amp;&amp;e[t].name.toLowerCase().indexOf(&quot;[EXCLUSIVE]&quot;.toLowerCase())&gt;-1&amp;&amp;(r[t]=&quot;0&quot;);else for(var t in e)t!=o&amp;&amp;(r[t]=&quot;0&quot;);return r}function log(e){window.log_arr=window.log_arr||[],window.log_arr.push(e)}function groupFlow(e,o){for(var n in o.groups){var r=o.groups[n];if(r.holdout!==!1&amp;&amp;Math.floor(100*Math.random())&gt;95)e.push(r.holdout);else{var t=Math.floor(Math.random()*(r.exps.length+r.me.length));t&lt;r.exps.length?e=e.concat(r.exps):e.push(r.me[t-r.exps.length])}}return e}function pickExperiment(e){var o=location.hostname.split(&quot;.&quot;);o=&quot;.&quot;+o[o.length-2]+&quot;.&quot;+o[o.length-1];var n={allExp:getRunningExclusiveExperiments(!0)},r={allExp:getRunningExclusiveExperiments(!1)},t=[];if(n=sortGroups(n),n.allExp.indexOf(e)&gt;-1||r.allExp.indexOf(e)&gt;-1)t.push(e);else if(void 0!==n.me&amp;&amp;void 0!==n.me.holdout&amp;&amp;Math.floor(100*Math.random())&gt;95)t.push(n.me.holdout);else if(void 0===n.groups)t.push(n.me.exps[Math.floor(Math.random()*n.me.exps.length)]);else if(void 0===n.me)t=groupFlow(t,n);else{var i=n.allExp.length-n.me.exps.length;Math.floor(Math.random()*n.allExp.length)&lt;i?t=groupFlow(t,n):t.push(n.me.exps[Math.floor(Math.random()*n.me.exps.length)])}return t=t.concat(r.allExp),docCookies.setItem(&quot;optimizelyExp&quot;,t,1728e8,&quot;/&quot;,o),t}function sortGroups(e){for(var o=0;o&lt;e.allExp.length;o++){var n=DATA.experiments[e.allExp[o]],r=n.name.toLowerCase();r.indexOf(&quot;group_&quot;)&gt;-1?(void 0===e.groups&amp;&amp;(e.groups={}),void 0===e.groups[r.charAt(7)]&amp;&amp;(e.groups[r.charAt(7)]={holdout:!1,me:[],exps:[]}),r.indexOf(&quot;holdout&quot;)&gt;-1?e.groups[r.charAt(7)].holdout=e.allExp[o]:r.indexOf(&quot;_me&quot;)&gt;-1?e.groups[r.charAt(7)].me.push(e.allExp[o]):e.groups[r.charAt(7)].exps.push(e.allExp[o])):(void 0===e.me&amp;&amp;(e.me={holdout:!1,exps:[]}),r.indexOf(&quot;holdout&quot;)&gt;-1?e.me.holdout=e.allExp[o]:e.me.exps.push(e.allExp[o]))}return e}function updateBuckets(e){window.optimizely=window.optimizely||[],log(&quot;Mutual exclusion chose experiment &quot;+e);for(var o in DATA.experiments)-1===e.indexOf(o)&amp;&amp;-1===window.location.search.indexOf(&quot;x&quot;+o)?(DATA.experiments[o].enabled=!1,log(&quot;Disable experiment &quot;+o)):console.log(&quot;Active - &quot;+o+&quot;: &quot;+DATA.experiments[o].name)}var docCookies={getItem:function(e){return decodeURIComponent(document.cookie.replace(new RegExp(&quot;(?:(?:^|.*;)\\s*&quot;+encodeURIComponent(e).replace(/[\-\.\+\*]/g,&quot;\\$&amp;&quot;)+&quot;\\s*\\=\\s*([^;]*).*$)|^.*$&quot;),&quot;$1&quot;))||null},setItem:function(e,o,n,r,t,i){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var p=&quot;&quot;;if(n)switch(n.constructor){case Number:p=1/0===n?&quot;; expires=Fri, 31 Dec 9999 23:59:59 GMT&quot;:&quot;; max-age=&quot;+n;break;case String:p=&quot;; expires=&quot;+n;break;case Date:p=&quot;; expires=&quot;+n.toUTCString()}return document.cookie=encodeURIComponent(e)+&quot;=&quot;+encodeURIComponent(o)+p+(t?&quot;; domain=&quot;+t:&quot;&quot;)+(r?&quot;; path=&quot;+r:&quot;&quot;)+(i?&quot;; secure&quot;:&quot;&quot;),!0},removeItem:function(e,o,n){return e&amp;&amp;this.hasItem(e)?(document.cookie=encodeURIComponent(e)+&quot;=; expires=Thu, 01 Jan 1970 00:00:00 GMT&quot;+(n?&quot;; domain=&quot;+n:&quot;&quot;)+(o?&quot;; path=&quot;+o:&quot;&quot;),!0):!1},hasItem:function(e){return new RegExp(&quot;(?:^|;\\s*)&quot;+encodeURIComponent(e).replace(/[\-\.\+\*]/g,&quot;\\$&amp;&quot;)+&quot;\\s*\\=&quot;).test(document.cookie)},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,&quot;&quot;).split(/\s*(?:\=[^;]*)?;\s*/),o=0;o&lt;e.length;o++)e[o]=decodeURIComponent(e[o]);return e}};if(window.print_log=function(){window.log_arr=window.log_arr||[],console.log(window.log_arr.join(&quot;\n &quot;))},&quot;undefined&quot;!=typeof DATA){var force_exp=getParameterByName(&quot;optimizely_exclusive_force&quot;),exp=docCookies.getItem(&quot;optimizelyExp&quot;);if(null!==exp&amp;&amp;exp.indexOf(&quot;,&quot;)&gt;-1&amp;&amp;&quot;&quot;==force_exp){exp=exp.split(&quot;,&quot;);for(var i=0;i&lt;exp.length;i++)if(!DATA.experiments.hasOwnProperty(exp[i])||!DATA.experiments[exp[i]].enabled)var exp=pickExperiment(force_exp)}else if(!exp||!DATA.experiments.hasOwnProperty(exp)||!DATA.experiments[exp].enabled||&quot;&quot;!=force_exp)var exp=pickExperiment(force_exp);window.opt_expid=exp,updateBuckets(exp)};
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="single-page-apps">Single page apps</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>On traditional websites, when visitors click links, the links generally lead to a new URL and load an entirely new page. In <a href="https://help.optimizely.com/hc/en-us/articles/203326524-AngularJS-Backbone-js-React-and-other-Single-Page-Applications">Single Page Applications</a>, the whole page doesn&#39;t reload; instead, certain content is changed, loaded, and swapped out in the current URL. Since Optimizely generally loads once per page load we&#39;ve created these code samples to help accommodate the behavior of Single Page Applications.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="single-page-apps-ajax-complete">AJAX complete</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This JavaScript will apply variation code whenever an AJAX request is complete.  In this example, we also require that the request URL contain the sub-string &quot;/shopping-cart&quot;.  Please see <a href="http://api.jquery.com/ajaxcomplete/">the official jQuery documentation</a> for more details on this method.</p>
<p>Please note that the .ajaxComplete() method is not included in the trimmed version of jQuery loaded with Optimizely by default. A library defining this method must be loaded before the snippet to use this code.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 *  Usage
 *     Apply variation code when an AJAX request is completed. In this example, we also require the request URL contain the sub-string &quot;/shopping-cart&quot;.
 *
 *  @param {Function} handler - A function to execute when the ajaxComplete event is triggered.
 *
 *  e.g. window.$(document).ajaxComplete(handler)
 */

 // Usage example
 window.$(document).ajaxComplete(function(event, xhr, settings) {
   if (settings.url.indexOf(&#39;/shopping-cart&#39;) &gt; -1) {
     //apply variation code
   }
 });
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="technology-integrations">Integrations</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>You can find code-samples for creating integrations with Optimizely in the <a href="http://developers.optimizely.com/integrations/">integrations</a> section.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
        
        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides intro">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h2 id="variation-code">Variation code</h2>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>These code samples can be used within your experiments&#39; <a href="https://help.optimizely.com/hc/en-us/articles/200039835-The-Code-Editor-Edit-Code-and-Variation-Code#edit_code">variation code</a>.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
          <!-- Row -->
<section>
  <!-- Left column -->
  <div class="soft-double--sides">

    <!-- Anchor link -->
    <!---->

    <!-- Title -->
    
      <h3 id="access-data-variation-code">Access data on page</h3>
    

    <!-- Endpoint -->
    

    <!-- Description -->
    <p>This is an example using JavaScript to access an object defined outside of the Optimizely snippet.  Please note that the variable must be declared above the snippet, so it is defined before Optimizely evaluates Audience conditions or executes experiment code.</p>


<!-- Indenting is weird here because of the <pre> tags -->

<!-- Example request-->


<!-- Example response -->


<!-- Example HTML -->


<!-- Example JS -->

<h4>Example Javascript</h4>
<pre>
<pre><code class="lang-js">/*
 * Example showing how to reference a variable defined natively on the page from inside Optimizely.
 */

 // Variation code example injecting the &#39;visitorName&#39; property of the &#39;exampleObject&#39; in the h3 elements
 $(&#39;h3&#39;).text(&#39;Hello,&#39; + window.exampleObject[&#39;visitorName&#39;]);
</code></pre>

</pre>


<!-- Example URL -->


<!-- Example Request -->


    <!-- Arguments -->
    
  </div>
</section>

        
      
    </div>
  </main>

  <footer class="footer cf soft--ends soft-double--sides">
    <div class="float--left">
      <a href="https://www.optimizely.com">
        <img class="display--inline-block vertical-align--bottom" src="/assets/img/optimizely_logo_footer.svg">
      </a>
      <span class="soft--left">&copy; 2016 Optimizely</span>
      <a class="soft--left is-hidden-on-mobile" href="https://www.optimizely.com/terms/">Terms of Service</a>
      <a class="soft--left" href="https://www.optimizely.com/privacy/">Privacy Policy</a>
    </div>
    <div class="float--right is-hidden-on-mobile" style="margin-top: 2px;">
       <a class="soft--left" href="https://www.optimizely.com/">Optimizely.com</a>
       <a class="soft--left" href="https://blog.optimizely.com/">Blog</a>
       <a class="soft--left" href="https://help.optimizely.com/">Help</a>
       <a class="soft--left" href="https://community.optimizely.com/">Community</a>
       <a class="soft--left" href="https://www.optimizely.com/jobs/">Jobs</a>
    </div>
  </footer>


    <!-- JQUERY -->
    <script src="//code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-13208639-14', 'optimizely.com');
      ga('send', 'pageview');
    </script>

    
  </body>
</html>

