---
partial: _inline.html
title: Redirect - Hash parameter
anchor: helpers-keep-hash
js: |

  /*
   *  Usage
   *    This JavaScript will redirect a visitor to the URL you pass in while preserving all hash parameters.  Be sure to include the protocol in the [REDIRECT_URL]
   *
   *  @param {String} redirectUrl - Replace "[REDIRECT_URL]" with the new URL.
   */

  /* _optimizely_redirect=http://custom_keep_hash */
  var redirectUrl = "[REDIRECT_URL]";
  var _optly = {redir:document.createElement("a")};
  _optly.redir.href = redirectUrl;  //
  _optly.cur = window.location.search;
  if (_optly.cur) {
    _optly.redir.search = _optly.redir.search ? _optly.cur + "&" + _optly.redir.search.slice(1) : _optly.cur;
  }
  if (window.location.hash) {
    _optly.redir.hash = window.location.hash;
  }
  window.location.replace(_optly.redir.href);

---

This JavaScript will redirect a visitor to a new URL while preserving the hash parameters.
